import{c as e,P as a,s as t,S as i}from"./index-ZxpkwSGJ.js";import{e as s}from"./enterprise-api-BssaVI4u.js";import{u as r}from"./vue-router-BJIyZwNj.js";import l from"./enterprise-operate-modal-uFOhXTeE.js";import{d as o}from"./default-time-ranges-uUNYRUiy.js";import{_ as n}from"./index-wy53HiSK.js";import{T as d}from"./table-id-const-CfofKxZg.js";import{F as p}from"./index-BgOQS_he.js";import u from"./enterprise-import-modal-D4U-MAsS.js";import{aq as m}from"./@ant-design-rHMPkvPq.js";import{M as c,b as f}from"./ant-design-vue-DFQN5xdf.js";import{r as y,a as g,e as v,b2 as h,z as j,b,o as k,y as x,c as _,ag as w,bz as I,u as S,K as z,J as C,ai as E,ah as N,F as T,be as P}from"./@vue-wTDZSr7R.js";import"./lodash-DJa03WnC.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./dayjs-CSPdbndm.js";import"./vue-i18n-DNlNJnDH.js";import"./@intlify-BXJl0ReV.js";import"./vue-DiME50Ru.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-VShT-BxW.js";import"./sm-crypto-BtLvRUKc.js";import"./jsbn-qAKIvbVZ.js";import"./nprogress-DmlD4NmX.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./@ctrl-B1U3vBhl.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-COtJ1lvC.js";import"./stylis-Bzr8AwGH.js";import"./vue-types-BvQfMnDx.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./regular-const-BsnQI0fZ.js";import"./index-DPBcXeae.js";import"./sortablejs-CRp0PNdb.js";/* empty css                                                                                 */const q={class:"smart-table-operate-block"},R={class:"smart-table-setting-block"},O={key:2},U={key:1},M={key:4,class:"smart-table-operate"},F={class:"smart-query-table-page"},L={__name:"enterprise-list",setup(L){const V=y([{title:"ID",dataIndex:"enterpriseId",width:80,align:"center"},{title:"企业名称",dataIndex:"enterpriseName",minWidth:180,ellipsis:!0},{title:"统一社会信用代码",dataIndex:"unifiedSocialCreditCode",minWidth:170,ellipsis:!0},{title:"企业类型",dataIndex:"type",width:100},{title:"联系人",width:100,dataIndex:"contact",ellipsis:!0},{title:"联系人电话",width:120,dataIndex:"contactPhone",ellipsis:!0},{title:"邮箱",minWidth:100,dataIndex:"email",ellipsis:!0},{title:"营业执照",width:80,dataIndex:"businessLicense",align:"center"},{title:"状态",width:50,dataIndex:"disabledFlag"},{title:"创建人",width:60,dataIndex:"createUserName"},{title:"创建时间",dataIndex:"createTime",width:150},{title:"操作",dataIndex:"action",width:100}]),D={keywords:"",endTime:null,startTime:null,pageNum:1,pageSize:e,searchCount:!0},W=g({...D}),$=y(!1),A=y([]),B=y(0);let J=y();function K(e,a){W.startTime=a[0],W.endTime=a[1]}function Q(){W.pageNum=1,G()}function Y(){J.value=[],Object.assign(W,D),G()}async function G(){try{$.value=!0;let e=await s.pageQuery(W);const a=e.data.list;B.value=e.data.total,A.value=a}catch(e){t.captureError(e)}finally{$.value=!1}}function H(e){c.confirm({title:"确定要删除吗？",content:"删除后，该信息将不可恢复",okText:"删除",okType:"danger",onOk(){!async function(e){try{i.show(),await s.delete(e),f.success("删除成功"),G()}catch(a){t.captureError(a)}finally{i.hide()}}(e)},cancelText:"取消",onCancel(){}})}let X=r();const Z=y(),ee=y(),ae=y();return v(G),(e,t)=>{const i=h("a-input"),r=h("a-form-item"),c=h("a-range-picker"),f=h("a-space"),y=h("SearchOutlined"),g=h("a-button"),v=h("ReloadOutlined"),L=h("a-button-group"),D=h("a-row"),te=h("a-form"),ie=h("PlusOutlined"),se=h("FileExcelOutlined"),re=h("a-table"),le=h("a-pagination"),oe=h("a-card"),ne=j("privilege");return k(),b(T,null,[x((k(),w(te,{class:"smart-query-form"},{default:I((()=>[_(D,{class:"smart-query-form-row"},{default:I((()=>[_(r,{label:"关键字",class:"smart-query-form-item"},{default:I((()=>[_(i,{style:{width:"300px"},value:W.keywords,"onUpdate:value":t[0]||(t[0]=e=>W.keywords=e),placeholder:"企业名称/联系人/联系电话"},null,8,["value"])])),_:1}),_(r,{label:"创建时间",class:"smart-query-form-item"},{default:I((()=>[_(f,{direction:"vertical",size:12},{default:I((()=>[_(c,{value:S(J),"onUpdate:value":t[1]||(t[1]=e=>z(J)?J.value=e:J=e),presets:S(o),onChange:K},null,8,["value","presets"])])),_:1})])),_:1}),_(r,{class:"smart-query-form-item smart-margin-left10"},{default:I((()=>[_(L,null,{default:I((()=>[_(g,{type:"primary",onClick:Q},{icon:I((()=>[_(y)])),default:I((()=>[C(" 查询 ")])),_:1}),_(g,{onClick:Y},{icon:I((()=>[_(v)])),default:I((()=>[C(" 重置 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})),[[ne,"oa:enterprise:query"]]),_(oe,{size:"small",bordered:!1,hoverable:!0},{default:I((()=>[_(D,{class:"smart-table-btn-block"},{default:I((()=>[E("div",q,[x((k(),w(g,{onClick:t[2]||(t[2]=e=>{Z.value.showModal()}),type:"primary"},{icon:I((()=>[_(ie)])),default:I((()=>[C(" 新建企业 ")])),_:1})),[[ne,"oa:enterprise:add"]]),x((k(),w(g,{onClick:t[3]||(t[3]=e=>{ae.value.showModal()}),type:"primary"},{icon:I((()=>[_(S(m))])),default:I((()=>[C(" 导入企业 ")])),_:1})),[[ne,"oa:enterprise:import"]]),x((k(),w(g,{onClick:t[4]||(t[4]=e=>async function(){await s.exportExcel(W)}()),type:"primary"},{icon:I((()=>[_(se)])),default:I((()=>[C(" 导出数据（带水印） ")])),_:1})),[[ne,"oa:enterprise:exportExcel"]])]),E("div",R,[_(n,{modelValue:V.value,"onUpdate:modelValue":t[5]||(t[5]=e=>V.value=e),tableId:S(d).BUSINESS.OA.ENTERPRISE,refresh:G},null,8,["modelValue","tableId"])])])),_:1}),_(re,{scroll:{x:1300},size:"small",dataSource:A.value,columns:V.value,rowKey:"enterpriseId",pagination:!1,loading:$.value,bordered:""},{bodyCell:I((({column:a,record:t,text:i})=>["disabledFlag"===a.dataIndex?(k(),b(T,{key:0},[C(P(i?"禁用":"启用"),1)],64)):N("",!0),"enterpriseName"===a.dataIndex?(k(),w(g,{key:1,type:"link",onClick:e=>{return a=t.enterpriseId,void X.push({path:"/oa/enterprise/enterprise-detail",query:{enterpriseId:a}});var a},disabled:!e.$privilege("oa:enterprise:detail")},{default:I((()=>[C(P(t.enterpriseName),1)])),_:2},1032,["onClick","disabled"])):N("",!0),"type"===a.dataIndex?(k(),b("span",O,P(e.$smartEnumPlugin.getDescByValue("ENTERPRISE_TYPE_ENUM",i)),1)):N("",!0),"businessLicense"===a.dataIndex?(k(),b(T,{key:3},[t.businessLicense&&t.businessLicense.length>0?(k(),w(g,{key:0,type:"link",size:"small",onClick:e=>{var a;(a=t.businessLicense)&&a.length>0&&ee.value.showPreview(a[0])}},{default:I((()=>[C(" 查看 ")])),_:2},1032,["onClick"])):(k(),b("span",U,"暂无"))],64)):N("",!0),"action"===a.dataIndex?(k(),b("div",M,[x((k(),w(g,{onClick:e=>{return a=t.enterpriseId,void Z.value.showModal(a);var a},size:"small",type:"link"},{default:I((()=>[C("编辑")])),_:2},1032,["onClick"])),[[ne,"oa:enterprise:update"]]),x((k(),w(g,{onClick:e=>H(t.enterpriseId),size:"small",danger:"",type:"link"},{default:I((()=>[C("删除")])),_:2},1032,["onClick"])),[[ne,"oa:enterprise:delete"]])])):N("",!0)])),_:1},8,["dataSource","columns","loading"]),E("div",F,[_(le,{showSizeChanger:"",showQuickJumper:"","show-less-items":"",pageSizeOptions:S(a),defaultPageSize:W.pageSize,current:W.pageNum,"onUpdate:current":t[6]||(t[6]=e=>W.pageNum=e),pageSize:W.pageSize,"onUpdate:pageSize":t[7]||(t[7]=e=>W.pageSize=e),total:B.value,onChange:G,onShowSizeChange:G,"show-total":e=>`共${e}条`},null,8,["pageSizeOptions","defaultPageSize","current","pageSize","total","show-total"])]),_(l,{ref_key:"operateRef",ref:Z,onRefresh:G},null,512),_(p,{ref_key:"filePreviewModalRef",ref:ee},null,512),_(u,{ref_key:"importModalRef",ref:ae,onRefresh:G},null,512)])),_:1})],64)}}};export{L as default};
