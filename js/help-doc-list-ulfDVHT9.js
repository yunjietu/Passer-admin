import e from"./help-doc-form-drawer-D9m0-Ath.js";import{c as a,w as t,s as l,P as o}from"./index-ZxpkwSGJ.js";import{_ as s}from"./index-wy53HiSK.js";import{d as i}from"./default-time-ranges-uUNYRUiy.js";import{T as r}from"./table-id-const-CfofKxZg.js";import{M as n,b as d}from"./ant-design-vue-DFQN5xdf.js";import{a as p,r as u,e as m,w as c,b2 as g,z as h,b as f,o as j,y,c as v,ag as b,bz as w,u as _,J as k,ai as C,ah as I,be as x,F as D}from"./@vue-wTDZSr7R.js";import"./lodash-DJa03WnC.js";import"./@ant-design-rHMPkvPq.js";import"./vue-DiME50Ru.js";import"./@ctrl-B1U3vBhl.js";import"./index-C8zfmN9n.js";import"./@wangeditor-next-BWE1cd2r.js";import"./help-doc-catalog-tree-select-8-bfQGZB.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-COtJ1lvC.js";import"./stylis-Bzr8AwGH.js";import"./vue-types-BvQfMnDx.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./dayjs-CSPdbndm.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./vue-i18n-DNlNJnDH.js";import"./@intlify-BXJl0ReV.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-VShT-BxW.js";import"./sm-crypto-BtLvRUKc.js";import"./jsbn-qAKIvbVZ.js";import"./nprogress-DmlD4NmX.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";import"./menu-api-BSnDUDM1.js";import"./menu-data-handler-Dl5chp6i.js";import"./sortablejs-CRp0PNdb.js";/* empty css                                                                                 */const z={class:"smart-table-operate-block"},S={class:"smart-table-setting-block"},q={key:1,class:"smart-table-operate"},O={class:"smart-query-table-page"},P={__name:"help-doc-list",props:{helpDocCatalogId:Number},setup(P){const T=P,E={helpDocCatalogId:T.helpDocCatalogId,keywords:"",createTimeBegin:null,createTimeEnd:null,pageNum:1,pageSize:a},N=p({...E}),U=u([{title:"标题",dataIndex:"title",ellipsis:!0},{title:"目录",dataIndex:"helpDocCatalogName",width:120,ellipsis:!0},{title:"作者",dataIndex:"author",width:110,ellipsis:!0},{title:"排序",dataIndex:"sort",width:90},{title:"页面浏览量",dataIndex:"pageViewCount",width:90},{title:"用户浏览量",dataIndex:"userViewCount",width:90},{title:"创建时间",dataIndex:"createTime",width:150},{title:"操作",dataIndex:"action",fixed:"right",width:90}]),V=u([]),R=u(0),B=u(!1);async function A(){try{B.value=!0;const e=await t.query(N);V.value=e.data.list,R.value=e.data.total}catch(e){l.captureError(e)}finally{B.value=!1}}function F(){N.pageNum=1,A()}function J(){Object.assign(N,E),L.value=[],M.value=[],A()}m((()=>{A()}));const L=u([]),M=u([]);function H(e,a){N.createTimeBegin=a[0],N.createTimeEnd=a[1]}const K=u();function Q(e){K.value.showModal(e)}function $(e){n.confirm({title:"提示",content:"确认删除此数据吗?",onOk(){!async function(e){try{B.value=!0,await t.delete(e),d.success("删除成功"),A()}catch(a){l.captureError(a)}finally{B.value=!1}}(e)}})}return c((()=>T.helpDocCatalogId),(()=>{N.helpDocCatalogId=T.helpDocCatalogId,F()}),{immediate:!0}),(a,t)=>{const l=g("a-input"),n=g("a-form-item"),d=g("a-range-picker"),p=g("SearchOutlined"),u=g("a-button"),m=g("ReloadOutlined"),c=g("a-button-group"),P=g("a-row"),T=g("a-form"),E=g("PlusOutlined"),L=g("router-link"),G=g("a-table"),W=g("a-pagination"),X=g("a-card"),Y=h("privilege");return j(),f(D,null,[y((j(),b(T,{class:"smart-query-form"},{default:w((()=>[v(P,{class:"smart-query-form-row"},{default:w((()=>[v(n,{label:"关键字",class:"smart-query-form-item"},{default:w((()=>[v(l,{style:{width:"300px"},value:N.keywords,"onUpdate:value":t[0]||(t[0]=e=>N.keywords=e),placeholder:"标题、作者"},null,8,["value"])])),_:1}),v(n,{label:"创建时间",class:"smart-query-form-item"},{default:w((()=>[v(d,{presets:_(i),value:M.value,"onUpdate:value":t[1]||(t[1]=e=>M.value=e),onChange:H,style:{width:"220px"}},null,8,["presets","value"])])),_:1}),v(n,{class:"smart-query-form-item smart-margin-left10"},{default:w((()=>[v(c,null,{default:w((()=>[v(u,{type:"primary",onClick:F},{icon:w((()=>[v(p)])),default:w((()=>[k(" 查询 ")])),_:1}),v(u,{onClick:J},{icon:w((()=>[v(m)])),default:w((()=>[k(" 重置 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})),[[Y,"support:helpDoc:query"]]),v(X,{size:"small",bordered:!1},{default:w((()=>[v(P,{class:"smart-table-btn-block"},{default:w((()=>[C("div",z,[y((j(),b(u,{type:"primary",onClick:t[2]||(t[2]=e=>Q())},{icon:w((()=>[v(E)])),default:w((()=>[k(" 新建 ")])),_:1})),[[Y,"support:helpDoc:add"]])]),C("div",S,[v(s,{modelValue:U.value,"onUpdate:modelValue":t[3]||(t[3]=e=>U.value=e),tableId:_(r).SUPPORT.HELP_DOC,refresh:A},null,8,["modelValue","tableId"])])])),_:1}),v(G,{rowKey:"helpDocId",columns:U.value,scroll:{x:1e3},dataSource:V.value,pagination:!1,loading:B.value,size:"small",bordered:""},{bodyCell:w((({column:e,record:a})=>["title"===e.dataIndex?(j(),b(L,{key:0,tag:"a",target:"_blank",to:{path:"/help-doc/detail",query:{helpDocId:a.helpDocId}}},{default:w((()=>[k(x(a.title),1)])),_:2},1032,["to"])):"action"===e.dataIndex?(j(),f("div",q,[y((j(),b(u,{type:"link",onClick:e=>Q(a.helpDocId)},{default:w((()=>[k("编辑")])),_:2},1032,["onClick"])),[[Y,"support:helpDoc:update"]]),y((j(),b(u,{type:"link",danger:"",onClick:e=>$(a.helpDocId)},{default:w((()=>[k("删除")])),_:2},1032,["onClick"])),[[Y,"support:helpDoc:delete"]])])):I("",!0)])),_:1},8,["columns","dataSource","loading"]),C("div",O,[v(W,{showSizeChanger:"",showQuickJumper:"","show-less-items":"",pageSizeOptions:_(o),defaultPageSize:N.pageSize,current:N.pageNum,"onUpdate:current":t[4]||(t[4]=e=>N.pageNum=e),pageSize:N.pageSize,"onUpdate:pageSize":t[5]||(t[5]=e=>N.pageSize=e),total:R.value,onChange:A,onShowSizeChange:A,"show-total":e=>`共${e}条`},null,8,["pageSizeOptions","defaultPageSize","current","pageSize","total","show-total"])])])),_:1}),v(e,{ref_key:"helpDocFormDrawerRef",ref:K,onReloadList:A},null,512)],64)}}};export{P as default};
