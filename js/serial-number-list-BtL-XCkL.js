import e from"./serial-number-generate-form-modal-DKYZ7AtX.js";import t from"./serial-number-record-list-LWqDuRor.js";import{s as a}from"./serial-number-api-d4m0zlHn.js";import{_ as r}from"./index-wy53HiSK.js";import{T as s}from"./table-id-const-CfofKxZg.js";import{s as i}from"./index-ZxpkwSGJ.js";import{r as o,e as l,b2 as n,z as m,b as d,o as u,c as p,bz as c,ai as j,u as b,ah as v,y as f,ag as y,J as g,F as _}from"./@vue-wTDZSr7R.js";import"./lodash-DJa03WnC.js";import"./@ant-design-rHMPkvPq.js";import"./vue-DiME50Ru.js";import"./@ctrl-B1U3vBhl.js";import"./ant-design-vue-DFQN5xdf.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-COtJ1lvC.js";import"./stylis-Bzr8AwGH.js";import"./vue-types-BvQfMnDx.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./dayjs-CSPdbndm.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./vue-i18n-DNlNJnDH.js";import"./@intlify-BXJl0ReV.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-VShT-BxW.js";import"./sm-crypto-BtLvRUKc.js";import"./jsbn-qAKIvbVZ.js";import"./nprogress-DmlD4NmX.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";import"./sortablejs-CRp0PNdb.js";/* empty css                                                                                 */const x=j("h4",null,"SerialNumber 单号生成器介绍：",-1),I=j("pre",null,"简介：SerialNumber是一个可以根据不同的日期、规则生成一系列特别单号的功能，比如订单号、合同号、采购单号等等。\n原理：内部有三种实现方式： 1) 基于内存锁实现 （不支持分布式和集群）；  2) 基于redis锁实现 ；  3) 基于Mysql 锁for update 实现\n- 支持随机生成和查询生成记录\n- 支持动态配置\n",-1),h=j("div",{style:{color:"red"}},"系统默认使用“内存锁”类型，若修改，请将后端代码 @Service 注解加到对应的实现类上：SerialNumberInternService、SerialNumberMysqlService、SerialNumberRedisService",-1),N={key:0,class:"smart-table-operate"},S={__name:"serial-number-list",setup(j){const S=o([{title:"ID",dataIndex:"serialNumberId"},{title:"业务",dataIndex:"businessName"},{title:"格式",dataIndex:"format"},{title:"循环周期",dataIndex:"ruleType"},{title:"初始值",dataIndex:"initNumber"},{title:"随机增量",dataIndex:"stepRandomRange"},{title:"备注",dataIndex:"remark"},{title:"上次产生单号",dataIndex:"lastNumber"},{title:"上次产生时间",dataIndex:"lastTime"},{title:"操作",dataIndex:"action",fixed:"right",width:140}]),k=o(!1),w=o([]);async function R(){try{k.value=!0;let e=await a.getAll();w.value=e.data}catch(e){i.captureError(e)}finally{k.value=!1}}l(R);const z=o();const C=o();return(a,i)=>{const o=n("a-alert"),l=n("a-row"),j=n("a-button"),M=n("a-table"),E=n("a-card"),T=m("privilege");return u(),d(_,null,[p(E,{size:"small",bordered:!1,hoverable:!0},{default:c((()=>[p(o,null,{message:c((()=>[x])),description:c((()=>[I,h])),_:1}),p(l,{justify:"end"},{default:c((()=>[p(r,{class:"smart-margin-bottom5 smart-margin-top5",modelValue:S.value,"onUpdate:modelValue":i[0]||(i[0]=e=>S.value=e),tableId:b(s).SUPPORT.SERIAL_NUMBER,refresh:R},null,8,["modelValue","tableId"])])),_:1}),p(M,{size:"small",loading:k.value,bordered:"",class:"smart-margin-top10",dataSource:w.value,columns:S.value,rowKey:"tag",pagination:!1},{bodyCell:c((({record:e,column:t})=>["action"===t.dataIndex?(u(),d("div",N,[f((u(),y(j,{onClick:t=>function(e){z.value.showModal(e)}(e),type:"link"},{default:c((()=>[g("生成")])),_:2},1032,["onClick"])),[[T,"support:serialNumber:generate"]]),f((u(),y(j,{onClick:t=>{return a=e.serialNumberId,void C.value.showModal(a);var a},type:"link"},{default:c((()=>[g("查看记录")])),_:2},1032,["onClick"])),[[T,"support:serialNumber:record"]])])):v("",!0)])),_:1},8,["loading","dataSource","columns"])])),_:1}),p(e,{ref_key:"generateForm",ref:z,onRefresh:R},null,512),p(t,{ref_key:"recordList",ref:C},null,512)],64)}}};export{S as default};
