import{m as e}from"./moguding-account-api-_EuqUysM.js";import{_ as t,s as a}from"./index-ZxpkwSGJ.js";import{d as o}from"./dayjs-CSPdbndm.js";import{b as r}from"./ant-design-vue-DFQN5xdf.js";import{r as i,a as l,b2 as s,ag as n,o as c,bz as p,ai as u,c as d,b as m,ah as g,J as j,be as y}from"./@vue-wTDZSr7R.js";import"./@ant-design-rHMPkvPq.js";import"./vue-DiME50Ru.js";import"./@ctrl-B1U3vBhl.js";import"./lodash-DJa03WnC.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./vue-i18n-DNlNJnDH.js";import"./@intlify-BXJl0ReV.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-VShT-BxW.js";import"./sm-crypto-BtLvRUKc.js";import"./jsbn-qAKIvbVZ.js";import"./nprogress-DmlD4NmX.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-COtJ1lvC.js";import"./stylis-Bzr8AwGH.js";import"./vue-types-BvQfMnDx.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";const v={style:{"font-size":"12px",color:"#666"}},f={key:2},S={class:"text-ellipsis",style:{"max-width":"200px",display:"inline-block"}},h=t({__name:"moguding-clock-record-modal",setup(t,{expose:h}){const x=i(!1),I=i(!1),b=i([]),w=i(""),z=i(""),k=l({accountId:null,pageNum:1,pageSize:10}),C=l({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`}),_=[{title:"ID",dataIndex:"id",width:80,align:"center"},{title:"账号",dataIndex:"account",width:150,align:"center"},{title:"姓名",dataIndex:"name",width:120,align:"center"},{title:"打卡类型",dataIndex:"clockType",width:120,align:"center"},{title:"打卡时间",dataIndex:"clockTime",width:180,align:"center"},{title:"结果",dataIndex:"result",width:300,align:"left"}];function N(){x.value=!1}function T(e){k.pageNum=e.current,k.pageSize=e.pageSize,C.current=e.current,C.pageSize=e.pageSize,E()}async function E(){try{I.value=!0;const t=await e.queryClockRecordsByPage(k);t.data&&(b.value=t.data.list||[],C.total=t.data.total||0,C.current=k.pageNum,C.pageSize=k.pageSize)}catch(t){r.error("加载打卡记录失败"),a.captureError(t)}finally{I.value=!1}}return h({showModal:function(e,t,a){k.accountId=e,w.value=t,z.value=a?.account||a?.phone||"未知账号",x.value=!0,k.pageNum=1,k.pageSize=10,C.current=1,C.pageSize=10,E()}}),(e,t)=>{const a=s("a-tag"),r=s("a-tooltip"),i=s("a-table"),l=s("a-modal");return c(),n(l,{open:x.value,width:1e3,forceRender:"",footer:null,onCancel:N},{title:p((()=>[u("div",null,[j(" 打卡记录 "),u("span",v,y(w.value)+" - "+y(z.value),1)])])),default:p((()=>[u("div",null,[d(i,{dataSource:b.value,columns:_,pagination:C,loading:I.value,rowKey:"id",size:"small",bordered:"",scroll:{x:800},onChange:T},{bodyCell:p((({column:e,record:t,text:i})=>{return["clockType"===e.dataIndex?(c(),n(a,{key:0,color:"SIGN_IN"===t.clockType?"blue":"orange"},{default:p((()=>[j(y("SIGN_IN"===t.clockType?"签到":"签退"),1)])),_:2},1032,["color"])):"result"===e.dataIndex?(c(),n(a,{key:1,color:"SUCCESS"===t.result?"success":"error"},{default:p((()=>[j(y("SUCCESS"===t.result?"成功":t.result),1)])),_:2},1032,["color"])):"clockTime"===e.dataIndex?(c(),m("span",f,y((l=i,l?o(l).format("YYYY-MM-DD HH:mm"):"")),1)):"result"===e.dataIndex&&"SUCCESS"!==t.result?(c(),n(r,{key:3,title:i,placement:"topLeft"},{default:p((()=>[u("span",S,y(i),1)])),_:2},1032,["title"])):g("",!0)];var l})),_:1},8,["dataSource","pagination","loading"])])])),_:1},8,["open"])}}},[["__scopeId","data-v-72746c66"]]);export{h as default};
