import{u as a}from"./vue-router-BJIyZwNj.js";import{b as s,p as e,_ as i,S as o,l}from"./index-ZxpkwSGJ.js";import{l as r,w as t,a as c,d as n,q as m,b as d,f as u,g as p}from"./google-icon-BXU_orIT.js";import{_ as v}from"./login-min-CFM8YJwT.js";import{b as g}from"./ant-design-vue-DFQN5xdf.js";import{r as f,a as j,e as h,l as w,b2 as y,b,o as C,ai as _,u as x,c as k,bz as N,J as P,aY as U,aW as q}from"./@vue-wTDZSr7R.js";import"./@ant-design-rHMPkvPq.js";import"./vue-DiME50Ru.js";import"./@ctrl-B1U3vBhl.js";import"./lodash-DJa03WnC.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./dayjs-CSPdbndm.js";import"./vue-i18n-DNlNJnDH.js";import"./@intlify-BXJl0ReV.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-VShT-BxW.js";import"./sm-crypto-BtLvRUKc.js";import"./jsbn-qAKIvbVZ.js";import"./nprogress-DmlD4NmX.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-COtJ1lvC.js";import"./stylis-Bzr8AwGH.js";import"./vue-types-BvQfMnDx.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";
/*
 * 用户注册 api 封装
 *
 * @Author:    1024创新实验室
 * @Date:      2024-01-01 10:00:00
 * @Copyright  1024创新实验室
 */const M=a=>e("/register/user",a),z=a=>s(`/register/checkLoginName/${a}`),B=()=>s("/login/getCaptcha"),D=a=>(U("data-v-0dd72794"),a=a(),q(),a),I={class:"login-container"},E={class:"box-item desc"},J=D((()=>_("div",{class:"welcome"},[_("p",null,"欢迎注册智能管理后台"),_("p",{class:"sub-welcome"},"高质量、简洁、高效、安全")],-1))),L=["src"],R={class:"box-item login"},S=["src"],W=D((()=>_("div",{class:"login-title"},"用户注册",-1))),Y=["src"],$={class:"more"},A={class:"login-tip"},F=D((()=>_("span",null,"已有账号？",-1))),G={class:"other-login"},H=D((()=>_("div",{class:"title-box"},[_("p",{class:"line"}),_("p",{class:"title"},"其他方式登录"),_("p",{class:"line"})],-1))),K={class:"login-type"},O=["src"],Q=["src"],T=["src"],V=["src"],X=["src"],Z=["src"],aa=["src"],sa=i({__name:"index",setup(s){const e=a(),i=f(),U=f(!1),q=f(""),D=j({loginName:"",password:"",confirmPassword:"",inviteCode:"",captchaCode:"",captchaUuid:"",registerDevice:1}),sa={loginName:[{required:!0,message:"请输入登录账号"},{min:3,max:30,message:"登录账号长度为3-30字符"}],password:[{required:!0,message:"请输入密码"},{min:6,max:50,message:"密码长度为6-50字符"}],confirmPassword:[{required:!0,message:"请再次输入密码"},{validator:(a,s)=>s&&s!==D.password?Promise.reject("两次输入的密码不一致"):Promise.resolve()}],inviteCode:[{required:!0,message:"请输入邀请码"}],captchaCode:[{required:!0,message:"请输入验证码"}]};async function ea(){i.value.validate().then((async()=>{try{o.show(),U.value=!0;const a={...D,password:l(D.password),confirmPassword:l(D.confirmPassword)},s=await M(a);g.success(s.data||"注册成功"),e.push("/login")}catch(a){a.data&&0!==a.data.code&&(D.captchaCode="",ia())}finally{o.hide(),U.value=!1}}))}async function ia(){try{const a=await B();q.value=a.data.captchaBase64Image,D.captchaUuid=a.data.captchaUuid}catch(a){}}async function oa(){if(D.loginName)try{(await z(D.loginName)).data||g.error("登录名已存在，请更换")}catch(a){}}return h((()=>{ia(),document.onkeyup=a=>{13===a.keyCode&&ea()}})),w((()=>{document.onkeyup=null})),(a,s)=>{const e=y("a-input"),o=y("a-form-item"),l=y("a-input-password"),g=y("a-form"),f=y("router-link");return C(),b("div",I,[_("div",E,[J,_("img",{class:"welcome-img",src:x(v)},null,8,L)]),_("div",R,[_("img",{class:"login-qr",src:x(r)},null,8,S),W,k(g,{ref_key:"formRef",ref:i,class:"login-form",model:D,rules:sa},{default:N((()=>[k(o,{name:"loginName"},{default:N((()=>[k(e,{value:D.loginName,"onUpdate:value":s[0]||(s[0]=a=>D.loginName=a),valueModifiers:{trim:!0},placeholder:"请输入登录账号",onBlur:oa},null,8,["value"])])),_:1}),k(o,{name:"password"},{default:N((()=>[k(l,{value:D.password,"onUpdate:value":s[1]||(s[1]=a=>D.password=a),placeholder:"请输入密码：至少6位字符"},null,8,["value"])])),_:1}),k(o,{name:"confirmPassword"},{default:N((()=>[k(l,{value:D.confirmPassword,"onUpdate:value":s[2]||(s[2]=a=>D.confirmPassword=a),placeholder:"请再次输入密码"},null,8,["value"])])),_:1}),k(o,{name:"inviteCode"},{default:N((()=>[k(e,{value:D.inviteCode,"onUpdate:value":s[3]||(s[3]=a=>D.inviteCode=a),valueModifiers:{trim:!0},placeholder:"请输入邀请码"},null,8,["value"])])),_:1}),k(o,{name:"captchaCode"},{default:N((()=>[k(e,{class:"captcha-input",value:D.captchaCode,"onUpdate:value":s[4]||(s[4]=a=>D.captchaCode=a),valueModifiers:{trim:!0},placeholder:"请输入验证码"},null,8,["value"]),_("img",{class:"captcha-img",src:q.value,onClick:ia},null,8,Y)])),_:1}),k(o,null,{default:N((()=>[_("div",{class:"btn",onClick:ea},"立即注册")])),_:1})])),_:1},8,["model"]),_("div",$,[_("div",A,[F,k(f,{to:"/login",class:"login-link"},{default:N((()=>[P("立即登录")])),_:1})]),_("div",G,[H,_("div",K,[_("img",{src:x(t)},null,8,O),_("img",{src:x(c)},null,8,Q),_("img",{src:x(n)},null,8,T),_("img",{src:x(m)},null,8,V),_("img",{src:x(d)},null,8,X),_("img",{src:x(u)},null,8,Z),_("img",{src:x(p)},null,8,aa)])])])])])}}},[["__scopeId","data-v-0dd72794"]]);export{sa as default};
