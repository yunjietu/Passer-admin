import{m as e}from"./moguding-account-api-_EuqUysM.js";import{_ as t,s as a}from"./index-ZxpkwSGJ.js";import{d as l}from"./dayjs-CSPdbndm.js";import{b as r}from"./ant-design-vue-DFQN5xdf.js";import{r as o,a as s,b2 as i,ag as u,o as n,bz as d,ai as p,c,b as m,ah as f,J as v,be as b}from"./@vue-wTDZSr7R.js";import"./@ant-design-rHMPkvPq.js";import"./vue-DiME50Ru.js";import"./@ctrl-B1U3vBhl.js";import"./lodash-DJa03WnC.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./vue-i18n-DNlNJnDH.js";import"./@intlify-BXJl0ReV.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-VShT-BxW.js";import"./sm-crypto-BtLvRUKc.js";import"./jsbn-qAKIvbVZ.js";import"./nprogress-DmlD4NmX.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-COtJ1lvC.js";import"./stylis-Bzr8AwGH.js";import"./vue-types-BvQfMnDx.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";const g={style:{"font-size":"12px",color:"#666"}},j={class:"table-container"},y={key:2},h={class:"text-ellipsis",style:{"max-width":"200px",display:"inline-block"}},w={key:0,class:"report-detail"},_={style:{"white-space":"pre-wrap"}},x={style:{"white-space":"pre-wrap"}},S=t({__name:"moguding-report-history-modal",setup(t,{expose:S}){const z=o(!1),k=o(!1),I=o([]),T=o(!1),D=o(null),C=o(""),M=o(""),N=s({accountId:null,pageNum:1,pageSize:10}),A=s({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`}),R=[{title:"报告类型",dataIndex:"reportTypeDesc",width:80,align:"center"},{title:"提交时间",dataIndex:"submitTime",width:150,align:"center"},{title:"提交状态",dataIndex:"submitStatusDesc",width:80,align:"center"},{title:"状态信息",dataIndex:"statusMessage",width:100,align:"left"},{title:"报告时间段",dataIndex:"reportPeriod",width:170,align:"center"}];function Y(){z.value=!1}function P(e){N.pageNum=e.current,N.pageSize=e.pageSize,A.current=e.current,A.pageSize=e.pageSize,E()}async function E(){try{k.value=!0;const t=await e.queryReportByPage(N);t.data&&(I.value=t.data.list||[],A.total=t.data.total||0,A.current=N.pageNum,A.pageSize=N.pageSize)}catch(t){r.error("加载报告历史失败"),a.captureError(t)}finally{k.value=!1}}function G(e){switch(e){case"day":return"blue";case"week":return"green";case"month":return"orange";default:return"default"}}function H(e){switch(e){case"day":return"日报";case"week":return"周报";case"month":return"月报";default:return"未知"}}return S({showModal:function(e,t,a){N.accountId=e,C.value=t,M.value=a?.account||a?.phone||"未知账号",N.pageNum=1,N.pageSize=10,A.current=1,A.pageSize=10,A.total=0,z.value=!0,E()}}),(e,t)=>{const a=i("a-tag"),r=i("a-tooltip"),o=i("a-table"),s=i("a-descriptions-item"),S=i("a-descriptions"),N=i("a-modal");return n(),u(N,{open:z.value,width:1e3,forceRender:"",footer:null,onCancel:Y},{title:d((()=>[p("div",null,[v(" 报告历史 "),p("span",g,b(C.value)+" - "+b(M.value),1)])])),default:d((()=>[p("div",j,[c(o,{dataSource:I.value,columns:R,pagination:A,loading:k.value,rowKey:"id",size:"small",bordered:"",scroll:{x:800},onChange:P},{bodyCell:d((({column:e,record:t,text:o})=>{return["reportTypeDesc"===e.dataIndex?(n(),u(a,{key:0,color:G(t.reportType)},{default:d((()=>[v(b(o),1)])),_:2},1032,["color"])):"submitStatusDesc"===e.dataIndex?(n(),u(a,{key:1,color:"success"===t.submitStatus?"success":"error"},{default:d((()=>[v(b(o),1)])),_:2},1032,["color"])):"submitTime"===e.dataIndex?(n(),m("span",y,b((s=o,s?l(s).format("YYYY-MM-DD HH:mm"):"")),1)):"statusMessage"===e.dataIndex?(n(),u(r,{key:3,title:o,placement:"topLeft"},{default:d((()=>[p("span",h,b(o),1)])),_:2},1032,["title"])):f("",!0)];var s})),_:1},8,["dataSource","pagination","loading"])]),c(N,{open:T.value,"onUpdate:open":t[0]||(t[0]=e=>T.value=e),title:"报告详情",width:"800px",footer:null},{default:d((()=>[D.value?(n(),m("div",w,[c(S,{column:2,bordered:""},{default:d((()=>[c(s,{label:"报告类型"},{default:d((()=>[c(a,{color:G(D.value.reportType)},{default:d((()=>[v(b(H(D.value.reportType)),1)])),_:1},8,["color"])])),_:1}),c(s,{label:"时间范围"},{default:d((()=>[v(b(D.value.startTime)+" 至 "+b(D.value.endTime),1)])),_:1}),c(s,{label:"工作地址"},{default:d((()=>[v(b(D.value.workAddress||"未填写"),1)])),_:1}),c(s,{label:"工作岗位"},{default:d((()=>[v(b(D.value.jobName||"未填写"),1)])),_:1}),c(s,{label:"提交状态"},{default:d((()=>[c(a,{color:"success"===D.value.submitStatus?"green":"red"},{default:d((()=>[v(b("success"===D.value.submitStatus?"成功":"失败"),1)])),_:1},8,["color"])])),_:1}),c(s,{label:"生成方式"},{default:d((()=>[c(a,{color:D.value.useAiGeneration?"blue":"default"},{default:d((()=>[v(b(D.value.useAiGeneration?"AI生成":"手动填写"),1)])),_:1},8,["color"])])),_:1}),c(s,{label:"工作内容",span:2},{default:d((()=>[p("div",_,b(D.value.workContent||"未填写"),1)])),_:1}),c(s,{label:"工作总结",span:2},{default:d((()=>[p("div",x,b(D.value.workSummary||"未填写"),1)])),_:1}),c(s,{label:"工作项目",span:2},{default:d((()=>[v(b(D.value.workProject||"未填写"),1)])),_:1}),D.value.submitResult?(n(),u(s,{key:0,label:"提交结果",span:2},{default:d((()=>[v(b(D.value.submitResult),1)])),_:1})):f("",!0),c(s,{label:"创建时间",span:2},{default:d((()=>[v(b(D.value.createTime),1)])),_:1})])),_:1})])):f("",!0)])),_:1},8,["open"])])),_:1},8,["open"])}}},[["__scopeId","data-v-b33d3bef"]]);export{S as default};
