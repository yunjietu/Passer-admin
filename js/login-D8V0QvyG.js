import{u as a}from"./vue-router-BJIyZwNj.js";import{_ as e,O as s,S as t,l,A as i,K as o,I as r,z as c,r as n,u as d,Q as p,s as u,R as m,V as v}from"./index-ZxpkwSGJ.js";import{l as g,w as h,a as f,d as b,q as y,b as j,f as w,g as k}from"./google-icon-BXU_orIT.js";import{c as _,B as C,b as x}from"./ant-design-vue-DFQN5xdf.js";import{a as q,r as S,e as U,h as z,l as I,b2 as E,b as N,o as A,ai as D,ao as L,u as V,c as M,bz as T,ag as B,ah as O,J as R,be as F,aY as J,aW as K}from"./@vue-wTDZSr7R.js";import"./@ant-design-rHMPkvPq.js";import"./vue-DiME50Ru.js";import"./@ctrl-B1U3vBhl.js";import"./lodash-DJa03WnC.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./dayjs-CSPdbndm.js";import"./vue-i18n-DNlNJnDH.js";import"./@intlify-BXJl0ReV.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-VShT-BxW.js";import"./sm-crypto-BtLvRUKc.js";import"./jsbn-qAKIvbVZ.js";import"./nprogress-DmlD4NmX.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-COtJ1lvC.js";import"./stylis-Bzr8AwGH.js";import"./vue-types-BvQfMnDx.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";const P=a=>(J("data-v-539de191"),a=a(),K(),a),$={class:"login-container"},Q={class:"box-item desc"},W=L('<div class="welcome" data-v-539de191><p data-v-539de191>欢迎登录 SmartAdmin V3</p><p class="desc" data-v-539de191> SmartAdmin 是由 河南·洛阳 <a target="_blank" href="https://www.1024lab.net" style="color:white;weight:bolder;font-size:15px;text-decoration:underline;" data-v-539de191>1024创新实验室（1024Lab）</a> 基于SpringBoot + Sa-Token + Mybatis-Plus 和 Vue3 + Vite5 + Ant Design Vue 4 (同时支持JavaScript和TypeScript双版本) 以「高质量代码」为核心，「简洁、高效、安全」的快速开发平台。 <br data-v-539de191><br data-v-539de191><span class="setence" data-v-539de191> 致伟大的开发者 ： <br data-v-539de191>     我们希望用一套漂亮优雅的代码和一套整洁高效的代码规范，让大家在这浮躁的世界里感受到一股把代码写好的清流 ! <br data-v-539de191> 保持谦逊，保持学习，热爱代码，更热爱生活 !<br data-v-539de191> 永远年轻，永远前行 !<br data-v-539de191><span class="author" data-v-539de191><a target="_blank" href="https://zhuoda.vip" style="color:white;font-size:13px;text-decoration:underline;" data-v-539de191> 1024创新实验室-主任：小何 </a></span></span></p></div>',1),Y={class:"app-qr-box"},G={class:"app-qr"},H=["src"],X=P((()=>D("span",{class:"qr-desc"}," 加微信，骚扰小何 :) ",-1))),Z={class:"app-qr"},aa=["src"],ea=P((()=>D("div",{class:"qr-desc-marquee"},[D("div",{class:"marquee"},[D("span",null,"关注：六边形工程师，分享：赚钱、代码、生活")])],-1))),sa={class:"box-item login"},ta=["src"],la=P((()=>D("div",{class:"login-title"},"账号登录",-1))),ia=["src"],oa=P((()=>D("span",null," ( 账号：admin, 密码：123456)",-1))),ra={class:"register-link"},ca=P((()=>D("span",null,"还没有账号？",-1))),na={class:"more"},da=P((()=>D("div",{class:"title-box"},[D("p",{class:"line"}),D("p",{class:"title"},"其他方式登录"),D("p",{class:"line"})],-1))),pa={class:"login-type"},ua=["src"],ma=["src"],va=["src"],ga=["src"],ha=["src"],fa=["src"],ba=["src"],ya=e({__name:"login",setup(e){const L=q({loginName:"admin",password:"",captchaCode:"",captchaUuid:"",loginDevice:s.PC.value}),J={loginName:[{required:!0,message:"用户名不能为空"}],password:[{required:!0,message:"密码不能为空"}],captchaCode:[{required:!0,message:"验证码不能为空"}]},K=S(!1),P=a(),ya=S(),ja=S(!1);async function wa(){ya.value.validate().then((async()=>{try{t.show();let a=Object.assign({},L,{password:l(L.password)});const e=await i.login(a);null!=Ca&&(clearInterval(Ca),Ca=null),o(r.USER_TOKEN,e.data.token?e.data.token:""),x.success("登录成功"),c().setUserLoginInfo(e.data);const s=await n.getAllDictData();d().initData(s.data),p(),P.push("/home")}catch(a){a.data&&0!==a.data.code&&(L.captchaCode="",_a()),u.captureError(a)}finally{t.hide()}}))}U((()=>{document.onkeyup=a=>{13===a.keyCode&&wa()},_.success({message:"温馨提示",description:"SmartAdmin 提供 9种 登录背景风格哦！",duration:8,onClick:()=>{},btn:()=>z(C,{type:"primary",target:"_blank",size:"small",href:"https://smartadmin.vip/views/doc/front/Login.html",onClick:()=>{}},{default:()=>"去看看"})})})),I((()=>{document.onkeyup=null}));const ka=S("");async function _a(){try{let e=await i.getCaptcha();ka.value=e.data.captchaBase64Image,L.captchaUuid=e.data.captchaUuid,a=e.data.expireSeconds,null===Ca&&(Ca=setInterval(_a,1e3*(a-5)))}catch(e){}var a}let Ca=null;U((()=>{_a(),async function(){try{let a=await i.getTwoFactorLoginFlag();xa.value=a.data}catch(a){u.captureError(a)}}()}));const xa=S(!1);let qa=S("获取邮箱验证码"),Sa=S(!1),Ua=null;async function za(){try{t.show();await i.sendLoginEmailCode(L.loginName);x.success("验证码发送成功!请登录邮箱查看验证码~"),function(){Sa.value=!0;let a=60;qa.value=`${a}秒后重新获取`,Ua=setInterval((()=>{a>1?(a--,qa.value=`${a}秒后重新获取`):(clearInterval(Ua),Sa.value=!1,qa.value="获取验证码")}),1e3)}()}catch(a){u.captureError(a)}finally{t.hide()}}return(a,e)=>{const s=E("a-input"),t=E("a-form-item"),l=E("a-button"),i=E("a-input-group"),o=E("a-input-password"),r=E("a-checkbox"),c=E("router-link"),n=E("a-form");return A(),N("div",$,[D("div",Q,[W,D("div",Y,[D("div",G,[D("img",{src:V(m)},null,8,H),X]),D("div",Z,[D("img",{src:V(v)},null,8,aa),ea])])]),D("div",sa,[D("img",{class:"login-qr",src:V(g)},null,8,ta),la,M(n,{ref_key:"formRef",ref:ya,class:"login-form",model:L,rules:J},{default:T((()=>[M(t,{name:"loginName"},{default:T((()=>[M(s,{value:L.loginName,"onUpdate:value":e[0]||(e[0]=a=>L.loginName=a),valueModifiers:{trim:!0},placeholder:"请输入用户名"},null,8,["value"])])),_:1}),xa.value?(A(),B(t,{key:0,name:"emailCode"},{default:T((()=>[M(i,{compact:""},{default:T((()=>[M(s,{style:{width:"calc(100% - 110px)"},value:L.emailCode,"onUpdate:value":e[1]||(e[1]=a=>L.emailCode=a),autocomplete:"on",placeholder:"请输入邮箱验证码"},null,8,["value"]),M(l,{onClick:za,class:"code-btn",type:"primary",disabled:V(Sa)},{default:T((()=>[R(F(V(qa)),1)])),_:1},8,["disabled"])])),_:1})])),_:1})):O("",!0),M(t,{name:"password"},{default:T((()=>[M(o,{value:L.password,"onUpdate:value":e[2]||(e[2]=a=>L.password=a),autocomplete:"on",type:K.value?"text":"password",placeholder:"请输入密码"},null,8,["value","type"])])),_:1}),M(t,{name:"captchaCode"},{default:T((()=>[M(s,{class:"captcha-input",value:L.captchaCode,"onUpdate:value":e[3]||(e[3]=a=>L.captchaCode=a),valueModifiers:{trim:!0},placeholder:"请输入验证码"},null,8,["value"]),D("img",{class:"captcha-img",src:ka.value,onClick:_a},null,8,ia)])),_:1}),M(t,null,{default:T((()=>[M(r,{checked:ja.value,"onUpdate:checked":e[4]||(e[4]=a=>ja.value=a)},{default:T((()=>[R("记住密码")])),_:1},8,["checked"]),oa])),_:1}),M(t,null,{default:T((()=>[D("div",{class:"btn",onClick:wa},"登录")])),_:1}),D("div",ra,[ca,M(c,{to:"/register",class:"register-text"},{default:T((()=>[R("立即注册")])),_:1})])])),_:1},8,["model"]),D("div",na,[da,D("div",pa,[D("img",{src:V(h)},null,8,ua),D("img",{src:V(f)},null,8,ma),D("img",{src:V(b)},null,8,va),D("img",{src:V(y)},null,8,ga),D("img",{src:V(j)},null,8,ha),D("img",{src:V(w)},null,8,fa),D("img",{src:V(k)},null,8,ba)])])])])}}},[["__scopeId","data-v-539de191"]]);export{ya as default};
