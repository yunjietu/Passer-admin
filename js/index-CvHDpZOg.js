import{_ as e}from"./lodash-DJa03WnC.js";import t from"./role-tree-checkbox-CqEiw-un.js";import{p as s,b as r,_ as a,S as i,s as o}from"./index-ZxpkwSGJ.js";import{u as m}from"./role-tree-menu-UqYxMadU.js";import{b as p}from"./ant-design-vue-DFQN5xdf.js";import{r as n,i as l,w as u,b2 as j,z as d,b as c,o as v,ai as y,c as f,y as b,ah as h,u as g,ag as w,bz as x,J as _,aY as k,aW as I}from"./@vue-wTDZSr7R.js";import"./@ant-design-rHMPkvPq.js";import"./vue-DiME50Ru.js";import"./@ctrl-B1U3vBhl.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./dayjs-CSPdbndm.js";import"./vue-i18n-DNlNJnDH.js";import"./@intlify-BXJl0ReV.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-VShT-BxW.js";import"./sm-crypto-BtLvRUKc.js";import"./jsbn-qAKIvbVZ.js";import"./nprogress-DmlD4NmX.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-COtJ1lvC.js";import"./stylis-Bzr8AwGH.js";import"./vue-types-BvQfMnDx.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./role-tree-point-Cr7Tuzjj.js";
/*
 * 角色菜单
 *
 * @Author:    1024创新实验室-主任：小何
 * @Date:      2022-09-03 22:00:49
 * @Wechat:    zhuda1024
 * @Email:     lab1024@163.com
 * @Copyright  1024创新实验室 （ https://1024lab.net ），Since 2012
 */const M=e=>r(`role/menu/getRoleSelectedMenu/${e}`),z=e=>s("role/menu/updateRoleMenu",e),E={class:"tree-header"},C=(e=>(k("data-v-1cdaf050"),e=e(),I(),e))((()=>y("p",null,"设置角色对应的功能操作、后台管理权限",-1))),D=a({__name:"index",setup(s){let r=m(),a=n(),k=l("selectRoleId");async function I(){let t=r.checkedData;if(e.isEmpty(t))return void p.error("还未选择任何权限");let s={roleId:k.value,menuIdList:t};i.show();try{await z(s),p.success("保存成功")}catch(a){o.captureError(a)}finally{i.hide()}}return u(k,(()=>async function(){if(!k.value)return;let t=(await M(k.value)).data;e.isEmpty(r.treeMap)&&r.initTreeMap(t.menuTreeList||[]);r.initCheckedData(t.selectedMenuId||[]),a.value=t.menuTreeList}()),{immediate:!0}),(e,s)=>{const r=j("a-button"),i=d("privilege");return v(),c("div",null,[y("div",E,[C,g(k)?b((v(),w(r,{key:0,type:"primary",onClick:I},{default:x((()=>[_(" 保存 ")])),_:1})),[[i,"system:role:menu:update"]]):h("",!0)]),f(t,{tree:g(a)},null,8,["tree"])])}}},[["__scopeId","data-v-1cdaf050"]]);export{D as default};
