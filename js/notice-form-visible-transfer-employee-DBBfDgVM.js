import{_ as e}from"./lodash-DJa03WnC.js";import{_ as t,N as a,h as s,s as i}from"./index-ZxpkwSGJ.js";import{d as l}from"./department-api-BBQ_I4Vj.js";import{r,m as o,w as n,e as d,b2 as p,b as m,o as c,ai as u,c as v,bz as y,aP as j,ag as f,ah as h,J as E,u as b,be as k,F as I,b0 as g,n as w}from"./@vue-wTDZSr7R.js";import"./@ant-design-rHMPkvPq.js";import"./vue-DiME50Ru.js";import"./@ctrl-B1U3vBhl.js";import"./ant-design-vue-DFQN5xdf.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-COtJ1lvC.js";import"./stylis-Bzr8AwGH.js";import"./vue-types-BvQfMnDx.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./dayjs-CSPdbndm.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./vue-i18n-DNlNJnDH.js";import"./@intlify-BXJl0ReV.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-VShT-BxW.js";import"./sm-crypto-BtLvRUKc.js";import"./jsbn-qAKIvbVZ.js";import"./nprogress-DmlD4NmX.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";const T={class:"wrapper"},C={class:"sider-left"},L={class:"list-item-title"},_={class:"sider-right"},x={class:"selected-list"},N={class:"list-item-title"},P=t({__name:"notice-form-visible-transfer-employee",props:{employeeList:{type:Array,default:()=>[]}},emits:["onChange"],setup(t,{emit:P}){const M=t,O=P,Y=r([]);async function z(){try{const t=await l.queryDepartmentTree(),a=await s.queryAll(),i=t.data;A(i,a.data),e.isEmpty(i)||(Y.value=i,w((()=>{D.value=[Y.value[0].key]})))}catch(t){i.captureError(t)}}function A(e,t){for(const s of e){if(s.dataType&&s.dataType===a.EMPLOYEE.value)continue;s.id=s.departmentId,s.name=s.departmentName,s.key="department_"+s.departmentId,s.dataType=a.DEPARTMENT.value;let e=t.filter((e=>e.departmentId===s.departmentId)).map((e=>Object.assign({},{id:e.employeeId,key:"employee_"+e.employeeId,name:e.actualName,dataType:a.EMPLOYEE.value})));s.children||(s.children=[]),s.children.push(...e),A(s.children,t)}}const D=r([]);const K=r([]),q=o((()=>K.value.map((e=>e.dataId))));function F(e){return q.value.includes(e)}function J(){O("onChange",{selectedList:K.value,selectedIds:q.value})}return n((()=>M.employeeList),(e=>{K.value=e}),{immediate:!0}),d((()=>{z()})),(e,t)=>{const s=p("caret-down-outlined"),i=p("user-outlined"),l=p("check-circle-filled"),r=p("a-tree"),o=p("close-circle-two-tone");return c(),m("div",T,[u("div",C,[v(r,{"tree-data":Y.value,fieldNames:{title:"name"},selectable:!1,expandedKeys:D.value,"onUpdate:expandedKeys":t[0]||(t[0]=e=>D.value=e)},{switcherIcon:y((({switcherCls:e})=>[v(s,{class:j(e)},null,8,["class"])])),title:y((({name:e,id:t,dataType:s})=>[u("div",{class:j(["list-item",{active:F(t)}])},[u("div",L,[s===b(a).EMPLOYEE.value?(c(),f(i,{key:0})):h("",!0),E(" "+k(e),1)]),s===b(a).EMPLOYEE.value?(c(),f(l,{key:0,class:"check-icon-style",onClick:s=>function(e,t,s){F(t)||(K.value.push({dataName:e,dataId:t,dataType:a.EMPLOYEE.value}),J())}(e,t)},null,8,["onClick"])):h("",!0)],2)])),_:1},8,["tree-data","expandedKeys"])]),u("div",_,[u("div",x,[(c(!0),m(I,null,g(K.value,((e,t)=>(c(),m("div",{class:"list-item",key:e.id},[u("div",N,k(e.dataName),1),v(o,{onClick:e=>function(e){K.value.splice(e,1),J()}(t)},null,8,["onClick"])])))),128))])])])}}},[["__scopeId","data-v-01e5c2d8"]]);export{P as default};
