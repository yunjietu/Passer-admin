import{u as e}from"./vue-router-BJIyZwNj.js";import{n as t}from"./notice-api-DZe8g0W4.js";import{_ as s,s as a}from"./index-ZxpkwSGJ.js";import o from"./default-home-card-rKNZ2Jpm.js";import{av as i}from"./@ant-design-rHMPkvPq.js";import{r as n,a as r,e as l,b2 as p,b as c,o as m,c as u,bz as d,ai as y,ag as j,u as v,F as f,b0 as h,aP as _,J as g,be as b,ah as k}from"./@vue-wTDZSr7R.js";import"./ant-design-vue-DFQN5xdf.js";import"./@babel-rSvM8Ko2.js";import"./@ctrl-B1U3vBhl.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-COtJ1lvC.js";import"./stylis-Bzr8AwGH.js";import"./vue-types-BvQfMnDx.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./dayjs-CSPdbndm.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./vue-DiME50Ru.js";import"./lodash-DJa03WnC.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./vue-i18n-DNlNJnDH.js";import"./@intlify-BXJl0ReV.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-VShT-BxW.js";import"./sm-crypto-BtLvRUKc.js";import"./jsbn-qAKIvbVZ.js";import"./nprogress-DmlD4NmX.js";import"./mitt-CNZ6avp8.js";/* empty css                                                                          */const w={class:"content-wrapper"},x={key:1},E=["onClick"],I={class:"time"},T={class:"sys-title"},C={class:"sys-notice-modal"},N=["innerHTML"],q={key:0,class:"sys-notice-meta"},z={key:0},F={key:1,class:"time-sep"},M=s({__name:"home-notice",props:{noticeTypeId:{type:Number,default:1}},setup(s){const M=s,D={noticeTypeId:M.noticeTypeId,pageNum:1,pageSize:6,searchCount:!1};let H=n([]);const L=n(!1),O=r({open:!1,title:"",content:"",username:"",time:""});function P(){S.push({path:"/oa/notice/notice-employee-list"})}l((()=>{!async function(){try{if(L.value=!0,1===M.noticeTypeId)try{const e=await t.queryMergedNotices(D);H.value=e.data.list}catch(e){a.captureError(e);const s=await t.queryEmployeeNotice(D);H.value=s.data.list}else{const e=await t.queryEmployeeNotice(D);H.value=e.data.list}}catch(e){a.captureError(e),H.value=[]}finally{L.value=!1}}()}));const S=e();function B(e){var t;"系统公告"===e.source?(O.title=e.title||"系统公告",O.content=e.content||"",O.username=e.username||"",O.time=e.time||"",O.open=!0):(t=e.noticeId,S.push({path:"/oa/notice/notice-employee-detail",query:{noticeId:t}}))}return(e,t)=>{const s=p("a-empty"),a=p("a-badge"),n=p("a-tooltip"),r=p("a-spin"),l=p("a-modal");return m(),c(f,null,[u(o,{extra:"更多",icon:"SoundOutlined",title:"通知公告",onExtraClick:P},{default:d((()=>[u(r,{spinning:L.value},{default:d((()=>[y("div",w,[e.$lodash.isEmpty(v(H))?(m(),j(s,{key:0})):(m(),c("ul",x,[(m(!0),c(f,null,h(v(H),((e,t)=>(m(),c("li",{key:t,class:_([e.viewFlag?"read":"un-read"])},[u(n,{placement:"top"},{title:d((()=>[y("span",null,b(e.title),1)])),default:d((()=>[y("a",{class:"content",onClick:t=>B(e)},[u(a,{status:"系统公告"===e.source?"processing":e.viewFlag?"default":"error"},null,8,["status"]),g(" "+b(e.title),1)],8,E)])),_:2},1024),y("span",I,b("系统公告"===e.source?e.time||"":e.publishDate||""),1)],2)))),128))]))])])),_:1},8,["spinning"])])),_:1}),u(l,{open:O.open,"onUpdate:open":t[0]||(t[0]=e=>O.open=e),width:600,okText:"关闭",cancelButtonProps:{style:{display:"none"}},onOk:t[1]||(t[1]=e=>O.open=!1),onCancel:t[2]||(t[2]=e=>O.open=!1)},{title:d((()=>[y("div",T,[u(v(i),{class:"sys-title-icon"}),y("span",null,b(O.title||"系统公告"),1)])])),default:d((()=>[y("div",C,[y("div",{class:"sys-notice-content",innerHTML:O.content},null,8,N),O.username||O.time?(m(),c("div",q,[O.username?(m(),c("span",z,"发布者："+b(O.username),1)):k("",!0),O.time?(m(),c("span",F,"时间："+b(O.time),1)):k("",!0)])):k("",!0)])])),_:1},8,["open"])],64)}}},[["__scopeId","data-v-722e7e07"]]);export{M as default};
