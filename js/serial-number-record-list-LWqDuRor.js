import{s as e}from"./serial-number-api-d4m0zlHn.js";import{s as a,P as t}from"./index-ZxpkwSGJ.js";import{r as o,a as s,b2 as i,ag as r,o as l,bz as n,c as p,ai as u,ah as m,J as d,be as c,u as j}from"./@vue-wTDZSr7R.js";import"./ant-design-vue-DFQN5xdf.js";import"./@babel-rSvM8Ko2.js";import"./@ant-design-rHMPkvPq.js";import"./vue-DiME50Ru.js";import"./@ctrl-B1U3vBhl.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-COtJ1lvC.js";import"./stylis-Bzr8AwGH.js";import"./vue-types-BvQfMnDx.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./dayjs-CSPdbndm.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./lodash-DJa03WnC.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./vue-i18n-DNlNJnDH.js";import"./@intlify-BXJl0ReV.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-VShT-BxW.js";import"./sm-crypto-BtLvRUKc.js";import"./jsbn-qAKIvbVZ.js";import"./nprogress-DmlD4NmX.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";const g={class:"smart-query-table-page"},b={__name:"serial-number-record-list",setup(b,{expose:v}){v({showModal:function(e){f.serialNumberId=e,f.pageNum=1,f.pageSize=10,I(),h.value=!0}});const h=o(!1);function y(){h.value=!1}const z=s([{title:"单号ID",dataIndex:"serialNumberId",width:70},{title:"日期",dataIndex:"recordDate"},{title:"生成数量",dataIndex:"count"},{title:"最后更新值",dataIndex:"lastNumber"},{title:"上次生成时间",dataIndex:"lastTime"}]),f=s({serialNumberId:-1,pageNum:1,pageSize:10}),S=o(!1),w=o([]),x=o(0);async function I(){try{S.value=!0;let a=await e.queryRecord(f);const t=a.data.list;x.value=a.data.total,w.value=t}catch(t){a.captureError(t)}finally{S.value=!1}}return(e,a)=>{const o=i("a-tag"),s=i("a-button"),b=i("a-table"),v=i("a-pagination"),S=i("a-modal");return l(),r(S,{open:h.value,title:"每日生成结果记录",width:"60%",footer:null,onCancel:y},{default:n((()=>[p(b,{size:"small",dataSource:w.value,columns:z,bordered:"",pagination:!1},{bodyCell:n((({text:a,record:t,column:i})=>["successFlag"===i.dataIndex?(l(),r(o,{key:0,color:a?"success":"error"},{default:n((()=>[d(c(a?"成功":"失败"),1)])),_:2},1032,["color"])):"action"===i.dataIndex?(l(),r(s,{key:1,onClick:a=>e.showDetail(t.operateLogId),type:"link"},{default:n((()=>[d("详情")])),_:2},1032,["onClick"])):m("",!0)])),_:1},8,["dataSource","columns"]),u("div",g,[p(v,{showSizeChanger:"",showQuickJumper:"","show-less-items":"",pageSizeOptions:j(t),defaultPageSize:f.pageSize,current:f.pageNum,"onUpdate:current":a[0]||(a[0]=e=>f.pageNum=e),pageSize:f.pageSize,"onUpdate:pageSize":a[1]||(a[1]=e=>f.pageSize=e),total:x.value,onChange:I,onShowSizeChange:I,"show-total":e=>`共${e}条`},null,8,["pageSizeOptions","defaultPageSize","current","pageSize","total","show-total"])])])),_:1},8,["open"])}}};export{b as default};
