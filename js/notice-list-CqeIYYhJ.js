import{a as e,r as t,e as a,b2 as l,z as i,b as o,o as s,y as r,c as n,ag as d,bz as u,F as m,b0 as c,J as p,be as f,u as y,ai as v,ah as g,E as h}from"./@vue-wTDZSr7R.js";import{u as b}from"./vue-router-BJIyZwNj.js";import{c as j,s as w,P as x}from"./index-ZxpkwSGJ.js";import _ from"./index-C6ijvUQb.js";import{n as I}from"./notice-api-DZe8g0W4.js";import k from"./notice-form-drawer-Dt7QN7ds.js";import{d as S}from"./default-time-ranges-uUNYRUiy.js";import{_ as z}from"./index-wy53HiSK.js";import{T as C}from"./table-id-const-CfofKxZg.js";import{M as N,b as T}from"./ant-design-vue-DFQN5xdf.js";import"./@ant-design-rHMPkvPq.js";import"./vue-DiME50Ru.js";import"./@ctrl-B1U3vBhl.js";import"./lodash-DJa03WnC.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./dayjs-CSPdbndm.js";import"./vue-i18n-DNlNJnDH.js";import"./@intlify-BXJl0ReV.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-VShT-BxW.js";import"./sm-crypto-BtLvRUKc.js";import"./jsbn-qAKIvbVZ.js";import"./nprogress-DmlD4NmX.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-COtJ1lvC.js";import"./stylis-Bzr8AwGH.js";import"./vue-types-BvQfMnDx.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./index-C8zfmN9n.js";import"./@wangeditor-next-BWE1cd2r.js";import"./notice-form-visible-modal-DmgOFmPh.js";import"./notice-form-visible-transfer-department-Cm7ljbE1.js";import"./department-api-BBQ_I4Vj.js";import"./notice-form-visible-transfer-employee-DBBfDgVM.js";import"./sortablejs-CRp0PNdb.js";/* empty css                                                                                 */const U={class:"smart-table-operate-block"},q={class:"smart-table-setting-block"},F=["onClick"],E={key:0,class:"smart-table-operate"},O={class:"smart-query-table-page"},V={__name:"notice-list",setup(V){const B={noticeTypeId:void 0,keywords:"",documentNumber:"",createUserName:void 0,deletedFlag:void 0,createTimeBegin:null,createTimeEnd:null,publishTimeBegin:null,publishTimeEnd:null,pageNum:1,pageSize:j},A=e({...B}),P=t([{title:"标题",dataIndex:"title",width:300,ellipsis:!0},{title:"文号",dataIndex:"documentNumber",width:100,ellipsis:!0},{title:"分类",dataIndex:"noticeTypeName",width:60,ellipsis:!0},{title:"作者",dataIndex:"author",width:80,ellipsis:!0},{title:"来源",dataIndex:"source",width:90,ellipsis:!0},{title:"可见范围",dataIndex:"allVisibleFlag",width:90,ellipsis:!0},{title:"发布状态",dataIndex:"publishFlag",width:80},{title:"删除",dataIndex:"deletedFlag",width:80},{title:"发布时间",dataIndex:"publishTime",width:150},{title:"页面浏览量",dataIndex:"pageViewCount",width:90},{title:"用户浏览量",dataIndex:"userViewCount",width:90},{title:"创建人",dataIndex:"createUserName",width:80},{title:"创建时间",dataIndex:"createTime",width:150},{title:"操作",dataIndex:"action",fixed:"right",width:90}]),D=t([]);const J=t([]),L=t(0),M=t(!1);async function R(){try{M.value=!0;const e=await I.queryNotice(A);J.value=e.data.list,L.value=e.data.total}catch(e){w.captureError(e)}finally{M.value=!1}}function K(){A.pageNum=1,R()}function Q(){Object.assign(A,B),$.value=[],H.value=[],R()}a((()=>{!async function(){try{const e=await I.getAllNoticeTypeList();D.value=e.data}catch(e){w.captureError(e)}}(),R()}));const $=t([]);function G(e,t){A.publishTimeBegin=t[0],A.publishTimeEnd=t[1]}const H=t([]);function W(e,t){A.createTimeBegin=t[0],A.createTimeEnd=t[1]}const X=t();function Y(e){X.value.showModal(e)}function Z(e){N.confirm({title:"提示",content:"确认删除此数据吗?",onOk(){!async function(e){try{M.value=!0,await I.deleteNotice(e),T.success("删除成功"),R()}catch(t){w.captureError(t)}finally{M.value=!1}}(e)}})}const ee=b();return(e,t)=>{const a=l("a-select-option"),b=l("a-select"),j=l("a-form-item"),w=l("a-input"),I=l("a-range-picker"),N=l("SearchOutlined"),T=l("a-button"),V=l("ReloadOutlined"),B=l("a-button-group"),te=l("a-row"),ae=l("a-form"),le=l("PlusOutlined"),ie=l("a-tag"),oe=l("a-table"),se=l("a-pagination"),re=l("a-card"),ne=i("privilege");return s(),o(m,null,[r((s(),d(ae,{class:"smart-query-form"},{default:u((()=>[n(te,{class:"smart-query-form-row"},{default:u((()=>[n(j,{label:"分类",class:"smart-query-form-item"},{default:u((()=>[n(b,{value:A.noticeTypeId,"onUpdate:value":t[0]||(t[0]=e=>A.noticeTypeId=e),style:{width:"100px"},showSearch:!0,allowClear:!0,placeholder:"分类"},{default:u((()=>[(s(!0),o(m,null,c(D.value,(e=>(s(),d(a,{key:e.noticeTypeId,value:e.noticeTypeId},{default:u((()=>[p(f(e.noticeTypeName),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1}),n(j,{label:"关键字",class:"smart-query-form-item"},{default:u((()=>[n(w,{style:{width:"300px"},value:A.keywords,"onUpdate:value":t[1]||(t[1]=e=>A.keywords=e),placeholder:"标题、作者、来源"},null,8,["value"])])),_:1}),n(j,{label:"文号",class:"smart-query-form-item"},{default:u((()=>[n(w,{style:{width:"150px"},value:A.documentNumber,"onUpdate:value":t[2]||(t[2]=e=>A.documentNumber=e),placeholder:"文号"},null,8,["value"])])),_:1}),n(j,{label:"创建人",class:"smart-query-form-item"},{default:u((()=>[n(w,{style:{width:"100px"},value:A.createUserName,"onUpdate:value":t[3]||(t[3]=e=>A.createUserName=e),placeholder:"创建人"},null,8,["value"])])),_:1}),n(j,{label:"是否删除",class:"smart-query-form-item"},{default:u((()=>[n(_,{value:A.deletedFlag,"onUpdate:value":t[4]||(t[4]=e=>A.deletedFlag=e),style:{width:"70px"}},null,8,["value"])])),_:1}),n(j,{label:"发布时间",class:"smart-query-form-item"},{default:u((()=>[n(I,{value:$.value,"onUpdate:value":t[5]||(t[5]=e=>$.value=e),presets:y(S),onChange:G,style:{width:"220px"}},null,8,["value","presets"])])),_:1}),n(j,{label:"创建时间",class:"smart-query-form-item"},{default:u((()=>[n(I,{value:H.value,"onUpdate:value":t[6]||(t[6]=e=>H.value=e),presets:y(S),onChange:W,style:{width:"220px"}},null,8,["value","presets"])])),_:1}),n(j,{class:"smart-query-form-item smart-margin-left10"},{default:u((()=>[n(B,null,{default:u((()=>[n(T,{type:"primary",onClick:K},{icon:u((()=>[n(N)])),default:u((()=>[p(" 查询 ")])),_:1}),n(T,{onClick:Q},{icon:u((()=>[n(V)])),default:u((()=>[p(" 重置 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})),[[ne,"oa:notice:query"]]),n(re,{size:"small",bordered:!1},{default:u((()=>[n(te,{class:"smart-table-btn-block"},{default:u((()=>[v("div",U,[r((s(),d(T,{type:"primary",onClick:t[7]||(t[7]=e=>Y())},{icon:u((()=>[n(le)])),default:u((()=>[p(" 新建 ")])),_:1})),[[ne,"oa:notice:add"]])]),v("div",q,[n(z,{modelValue:P.value,"onUpdate:modelValue":t[8]||(t[8]=e=>P.value=e),tableId:y(C).BUSINESS.OA.NOTICE,refresh:R},null,8,["modelValue","tableId"])])])),_:1}),n(oe,{rowKey:"noticeId",columns:P.value,dataSource:J.value,scroll:{x:1510},pagination:!1,loading:M.value,size:"small",bordered:""},{bodyCell:u((({column:e,record:t,text:a})=>["title"===e.dataIndex?(s(),o("a",{key:0,onClick:e=>{return a=t.noticeId,void ee.push({path:"/oa/notice/notice-detail",query:{noticeId:a}});var a}},f(a),9,F)):g("",!0),"documentNumber"===e.dataIndex?(s(),o(m,{key:1},[p(f(a||"无"),1)],64)):"allVisibleFlag"===e.dataIndex?(s(),o(m,{key:2},[p(f(a?"全部可见":"部分可见"),1)],64)):"publishFlag"===e.dataIndex?(s(),o(m,{key:3},[p(f(a?"已发布":"待发布"),1)],64)):"deletedFlag"===e.dataIndex?(s(),o(m,{key:4},[r(n(ie,{color:"error"},{default:u((()=>[p("已删除")])),_:2},1536),[[h,a]]),r(n(ie,{color:"success"},{default:u((()=>[p("未删除")])),_:2},1536),[[h,!a]])],64)):"action"===e.dataIndex?(s(),o(m,{key:5},[t.deletedFlag?g("",!0):(s(),o("div",E,[r((s(),d(T,{type:"link",onClick:e=>Y(t.noticeId)},{default:u((()=>[p("编辑")])),_:2},1032,["onClick"])),[[ne,"oa:notice:update"]]),r((s(),d(T,{type:"link",onClick:e=>Z(t.noticeId),danger:""},{default:u((()=>[p("删除")])),_:2},1032,["onClick"])),[[ne,"oa:notice:delete"]])]))],64)):g("",!0)])),_:1},8,["columns","dataSource","loading"]),v("div",O,[n(se,{showSizeChanger:"",showQuickJumper:"","show-less-items":"",pageSizeOptions:y(x),defaultPageSize:A.pageSize,current:A.pageNum,"onUpdate:current":t[9]||(t[9]=e=>A.pageNum=e),pageSize:A.pageSize,"onUpdate:pageSize":t[10]||(t[10]=e=>A.pageSize=e),total:L.value,onChange:R,onShowSizeChange:R,"show-total":e=>`共${e}条`},null,8,["pageSizeOptions","defaultPageSize","current","pageSize","total","show-total"])])])),_:1}),n(k,{ref_key:"noticeFormDrawer",ref:X,onReloadList:R},null,512)],64)}}};export{V as default};
