import{r as a,b2 as e,b as l,o as t,ao as s,c as i,ai as n,bz as o,ah as d,F as c,b0 as u,ag as r,J as v,be as p,G as f,bB as m,aP as h,x as b,u as g,aY as y,aW as w}from"./@vue-wTDZSr7R.js";import{e as k}from"./enterprise-api-BssaVI4u.js";import{_ as x,U as j,F as _,j as C}from"./index-ZxpkwSGJ.js";import{b as z}from"./ant-design-vue-DFQN5xdf.js";import"./@ant-design-rHMPkvPq.js";import"./vue-DiME50Ru.js";import"./@ctrl-B1U3vBhl.js";import"./lodash-DJa03WnC.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./dayjs-CSPdbndm.js";import"./vue-i18n-DNlNJnDH.js";import"./@intlify-BXJl0ReV.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-VShT-BxW.js";import"./sm-crypto-BtLvRUKc.js";import"./jsbn-qAKIvbVZ.js";import"./nprogress-DmlD4NmX.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-COtJ1lvC.js";import"./stylis-Bzr8AwGH.js";import"./vue-types-BvQfMnDx.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";const A=a=>(y("data-v-dbdaa5b9"),a=a(),w(),a),L={class:"company-query-bg"},M=s('<svg class="bg-top-wave" width="100%" height="180" viewBox="0 0 1440 180" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-dbdaa5b9><path d="M0,80 C360,180 1080,0 1440,100 L1440,0 L0,0 Z" fill="url(#topWaveGradient)" data-v-dbdaa5b9></path><defs data-v-dbdaa5b9><linearGradient id="topWaveGradient" x1="0" y1="0" x2="1440" y2="0" gradientUnits="userSpaceOnUse" data-v-dbdaa5b9><stop stop-color="#52c41a" data-v-dbdaa5b9></stop><stop offset="0.5" stop-color="#1890ff" data-v-dbdaa5b9></stop><stop offset="1" stop-color="#722ed1" data-v-dbdaa5b9></stop></linearGradient></defs></svg><svg class="bg-svg" width="100%" height="100%" viewBox="0 0 1440 900" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-dbdaa5b9><ellipse cx="720" cy="-100" rx="900" ry="300" fill="#f6ffed" data-v-dbdaa5b9></ellipse><ellipse cx="200" cy="900" rx="400" ry="120" fill="#f0f9ff" data-v-dbdaa5b9></ellipse><ellipse cx="1300" cy="800" rx="300" ry="100" fill="#f9f0ff" data-v-dbdaa5b9></ellipse></svg>',2),I={class:"main-card glass-card"},N=A((()=>n("div",{class:"logo-area"},[n("div",{class:"logo-circle"},[n("svg",{width:"54",height:"54",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[n("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",fill:"#52c41a"}),n("path",{d:"M2 17L12 22L22 17",fill:"#1890ff"}),n("path",{d:"M2 12L12 17L22 12",fill:"#722ed1"})])]),n("div",{class:"logo-divider"})],-1))),U=A((()=>n("div",{class:"slogan"},"让企业信息一目了然",-1))),B=A((()=>n("h1",{class:"main-title"},"企业信息查询",-1))),S=A((()=>n("div",{class:"tip"},"请输入企业名称、联系人、联系电话等关键词进行搜索",-1))),F={class:"search-examples"},P=A((()=>n("span",{class:"examples-label"},"搜索示例：",-1))),q=A((()=>n("div",{class:"search-tips"},[n("div",{class:"tips-title"},[n("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[n("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z",fill:"#1890ff"})]),v(" 搜索技巧 ")]),n("div",{class:"tips-content"},[n("div",{class:"tip-item"},[v('• 如果"计算机"搜不到，试试换词：'),n("strong",null,"软件"),v("、"),n("strong",null,"信息技术"),v("、"),n("strong",null,"网络")]),n("div",{class:"tip-item"},[v("• 搜不到省份时，可直接搜索"),n("strong",null,"专业领域"),v("或"),n("strong",null,"行业关键词")]),n("div",{class:"tip-item"},[v("• 支持"),n("strong",null,"空格分词搜索"),v('，如："'),n("strong",null,"河南 技术"),v('"可搜到河南省的技术类企业')])])],-1))),G=A((()=>n("span",{class:"input-icon"},[n("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none"},[n("path",{d:"M21 20.3l-5.6-5.6A7.9 7.9 0 1 0 18 16.4l5.6 5.6-2.6 2.6zM4 10a6 6 0 1 1 12 0 6 6 0 0 1-12 0z",fill:"#52c41a"})])],-1))),K={class:"form-btn-row"},$=A((()=>n("span",{class:"btn-icon"},[n("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none"},[n("path",{d:"M21 20.3l-5.6-5.6A7.9 7.9 0 1 0 18 16.4l5.6 5.6-2.6 2.6zM4 10a6 6 0 1 1 12 0 6 6 0 0 1-12 0z",fill:"#fff"})])],-1))),D={key:0,class:"error-msg"},V={key:1,class:"search-results"},E={class:"section-title"},T=A((()=>n("span",{class:"bar"},null,-1))),W={class:"company-list"},Z=["onClick"],H={class:"company-header"},J={class:"company-name"},O={class:"company-type"},Q={class:"company-info"},Y={class:"info-item"},R=A((()=>n("span",{class:"label"},"联系人:",-1))),X={class:"value"},aa={class:"info-item"},ea=A((()=>n("span",{class:"label"},"联系电话:",-1))),la={class:"value"},ta={class:"info-item"},sa=A((()=>n("span",{class:"label"},"邮箱:",-1))),ia={class:"value"},na={class:"info-item"},oa=A((()=>n("span",{class:"label"},"地址:",-1))),da={class:"value"},ca={class:"company-footer"},ua=A((()=>n("span",{class:"view-detail"},"点击查看详情 →",-1))),ra={key:0,class:"company-detail"},va={class:"detail-section"},pa=A((()=>n("h3",null,"基本信息",-1))),fa={key:0,class:"detail-section"},ma=A((()=>n("h3",null,"营业执照",-1))),ha={class:"license-preview"},ba=["src"],ga=A((()=>n("div",{class:"copyright"},"© 2024 企业信息查询平台 | 粤ICP备xxxxxxx号",-1))),ya=[A((()=>n("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[n("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z",fill:"#fff"}),n("path",{d:"M7 9h10M7 13h6",stroke:"#52c41a","stroke-width":"2","stroke-linecap":"round"})],-1))),A((()=>n("span",null,"反馈",-1)))],wa=A((()=>n("div",{class:"contact-tip"},[n("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none"},[n("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z",fill:"#52c41a"})]),n("span",null,"填写联系方式可查询反馈进度")],-1))),ka=A((()=>n("div",{class:"feedback-tip"},[n("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none"},[n("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z",fill:"#1890ff"})]),n("span",null,"您的反馈对我们很重要，我们会认真处理每一条建议")],-1))),xa={class:"feedback-actions"},ja=x({__name:"company-query",setup(s){const y=a(""),w=a([]),x=a(!1),A=a(""),ja=a(!1),_a=a(null),Ca=a(["北京 科技","软件","信息技术","网络","教育","科技","制造","贸易"]);const za=a(!1),Aa=a(!1),La=a(0),Ma=a({feedbackContent:"",contactInfo:"",feedbackAttachment:[]});function Ia(){Ma.value={feedbackContent:"",contactInfo:"",feedbackAttachment:[]},La.value++,za.value=!0}function Na(a){Ma.value.feedbackAttachment=a}async function Ua(){if(Ma.value.feedbackContent.trim()){Aa.value=!0;try{const a=Ma.value.feedbackAttachment.map((a=>({fileId:a.fileId,fileName:a.fileName,fileUrl:a.fileUrl,fileKey:a.fileKey})));await C.addPublicFeedback({feedbackContent:Ma.value.feedbackContent.trim(),contactInfo:Ma.value.contactInfo.trim(),feedbackAttachment:a});z.success("反馈提交成功，感谢您的建议！"),za.value=!1,Ma.value={feedbackContent:"",contactInfo:"",feedbackAttachment:[]},La.value++}catch(a){a.response&&a.response.data?z.error(a.response.data.msg||a.response.data.message||"反馈提交失败，请稍后重试"):z.error("反馈提交失败，请稍后重试")}finally{Aa.value=!1}}else z.warning("请输入反馈内容")}async function Ba(){if(y.value.trim()){x.value=!0,A.value="",w.value=[];try{const a=await k.publicPageQuery({keywords:y.value.trim(),pageNum:1,pageSize:50});a.data&&a.data.list?(w.value=a.data.list,0===w.value.length?z.info("未找到相关企业信息"):z.success(`找到 ${w.value.length} 家企业`)):a.data&&a.data.rows?(w.value=a.data.rows,0===w.value.length?z.info("未找到相关企业信息"):z.success(`找到 ${w.value.length} 家企业`)):a.rows?(w.value=a.rows,0===w.value.length?z.info("未找到相关企业信息"):z.success(`找到 ${w.value.length} 家企业`)):a.data&&Array.isArray(a.data)?(w.value=a.data,0===w.value.length?z.info("未找到相关企业信息"):z.success(`找到 ${w.value.length} 家企业`)):(w.value=[],z.info("未找到相关企业信息"))}catch(a){A.value="搜索失败，请稍后重试",z.error("搜索失败，请稍后重试")}finally{x.value=!1}}else z.warning("请输入搜索关键词")}function Sa(a){const e=[];return a.provinceName&&e.push(a.provinceName),a.cityName&&e.push(a.cityName),a.districtName&&e.push(a.districtName),a.address&&e.push(a.address),e.length>0?e.join(" "):"-"}function Fa(a){if(!a)return"-";return new Date(a).toLocaleDateString("zh-CN")}function Pa(a){return a?`/api/file/download?fileKey=${a}`:""}return(a,s)=>{const k=e("a-tag"),C=e("a-input"),z=e("a-form-item"),qa=e("a-button"),Ga=e("a-form"),Ka=e("a-divider"),$a=e("a-descriptions-item"),Da=e("a-descriptions"),Va=e("a-modal"),Ea=e("a-textarea");return t(),l("div",L,[M,i(b,{name:"fade-in"},{default:o((()=>[n("div",I,[N,U,B,S,n("div",F,[P,(t(!0),l(c,null,u(Ca.value,(a=>(t(),r(k,{key:a,class:"example-tag",onClick:e=>function(a){y.value=a}(a)},{default:o((()=>[v(p(a),1)])),_:2},1032,["onClick"])))),128))]),q,i(Ga,{layout:"vertical",onSubmit:f(Ba,["prevent"]),class:"query-form-vertical"},{default:o((()=>[i(z,{class:"form-label-item"},{default:o((()=>[i(C,{value:y.value,"onUpdate:value":s[0]||(s[0]=a=>y.value=a),placeholder:"请输入企业名称、联系人、联系电话等关键词",class:"round-input",onKeyup:m(Ba,["enter"])},{prefix:o((()=>[G])),_:1},8,["value"])])),_:1}),n("div",K,[i(qa,{type:"primary",loading:x.value,onClick:Ba,class:"gradient-btn round-btn ripple-btn"},{default:o((()=>[$,v(" 搜索企业 ")])),_:1},8,["loading"])])])),_:1}),i(Ka),A.value?(t(),l("div",D,p(A.value),1)):d("",!0),w.value.length>0?(t(),l("div",V,[n("div",E,[T,v(" 搜索结果 ("+p(w.value.length)+"条) ",1)]),n("div",W,[(t(!0),l(c,null,u(w.value,(a=>(t(),l("div",{key:a.enterpriseId,class:"company-card",onClick:e=>function(a){_a.value=a,ja.value=!0}(a)},[n("div",H,[n("div",J,p(a.enterpriseName),1),n("div",O,[i(k,{color:1===a.type?"blue":"purple"},{default:o((()=>[v(p(1===a.type?"有限企业":"外资企业"),1)])),_:2},1032,["color"])])]),n("div",Q,[n("div",Y,[R,n("span",X,p(a.contact||"-"),1)]),n("div",aa,[ea,n("span",la,p(a.contactPhone||"-"),1)]),n("div",ta,[sa,n("span",ia,p(a.email||"-"),1)]),n("div",na,[oa,n("span",da,p(Sa(a)),1)])]),n("div",ca,[n("span",{class:h(["status",{disabled:a.disabledFlag}])},p(a.disabledFlag?"已禁用":"正常"),3),ua])],8,Z)))),128))])])):d("",!0),i(Va,{open:ja.value,"onUpdate:open":s[2]||(s[2]=a=>ja.value=a),title:"企业详细信息",width:"600px",footer:null,class:"company-detail-modal"},{default:o((()=>[_a.value?(t(),l("div",ra,[n("div",va,[pa,i(Da,{bordered:"",column:2},{default:o((()=>[i($a,{label:"企业名称",span:"2"},{default:o((()=>[v(p(_a.value.enterpriseName),1)])),_:1}),i($a,{label:"企业类型"},{default:o((()=>[v(p(1===_a.value.type?"有限企业":"外资企业"),1)])),_:1}),i($a,{label:"统一社会信用代码"},{default:o((()=>[v(p(_a.value.unifiedSocialCreditCode||"-"),1)])),_:1}),i($a,{label:"联系人"},{default:o((()=>[v(p(_a.value.contact||"-"),1)])),_:1}),i($a,{label:"联系电话"},{default:o((()=>[v(p(_a.value.contactPhone||"-"),1)])),_:1}),i($a,{label:"邮箱"},{default:o((()=>[v(p(_a.value.email||"-"),1)])),_:1}),i($a,{label:"详细地址",span:"2"},{default:o((()=>[v(p(Sa(_a.value)),1)])),_:1}),i($a,{label:"状态"},{default:o((()=>[i(k,{color:_a.value.disabledFlag?"red":"green"},{default:o((()=>[v(p(_a.value.disabledFlag?"已禁用":"正常"),1)])),_:1},8,["color"])])),_:1}),i($a,{label:"创建时间"},{default:o((()=>[v(p(Fa(_a.value.createTime)),1)])),_:1})])),_:1})]),_a.value.businessLicense?(t(),l("div",fa,[ma,n("div",ha,[n("img",{src:Pa(_a.value.businessLicense),alt:"营业执照",class:"license-image",onClick:s[1]||(s[1]=a=>function(a){if(!a)return;const e=Pa(a);window.open(e,"_blank")}(_a.value.businessLicense))},null,8,ba)])])):d("",!0)])):d("",!0)])),_:1},8,["open"]),ga])])),_:1}),n("div",{class:"feedback-float-btn",onClick:Ia},ya),i(Va,{open:za.value,"onUpdate:open":s[7]||(s[7]=a=>za.value=a),title:"意见反馈",width:"600px",footer:null,class:"feedback-modal"},{default:o((()=>[i(Ga,{model:Ma.value,layout:"vertical",onFinish:Ua},{default:o((()=>[i(z,{label:"反馈内容",name:"feedbackContent",rules:[{required:!0,message:"请输入反馈内容"}]},{default:o((()=>[i(Ea,{value:Ma.value.feedbackContent,"onUpdate:value":s[3]||(s[3]=a=>Ma.value.feedbackContent=a),placeholder:"请描述您遇到的问题或建议，比如：搜索功能、页面显示、使用体验等...",rows:5,maxlength:150,"show-count":""},null,8,["value"])])),_:1}),i(z,{label:"联系方式",name:"contactInfo",rules:[{required:!1,message:"请输入联系方式"}],style:{"margin-top":"-20px"}},{default:o((()=>[i(C,{value:Ma.value.contactInfo,"onUpdate:value":s[4]||(s[4]=a=>Ma.value.contactInfo=a),placeholder:"请输入您的联系方式，如：手机号、邮箱、微信等（选填）",maxlength:15,"show-count":""},null,8,["value"]),wa])),_:1}),i(z,{label:"反馈图片",name:"feedbackAttachment"},{default:o((()=>[(t(),r(j,{key:La.value,value:Ma.value.feedbackAttachment,"onUpdate:value":s[5]||(s[5]=a=>Ma.value.feedbackAttachment=a),folder:g(_).FEEDBACK.value,accept:".jpg,.jpeg,.png,.gif",maxSize:5,maxUploadSize:3,multiple:!0,listType:"picture-card",buttonText:"点击上传反馈图片",anonymous:!0,onChange:Na},null,8,["value","folder"]))])),_:1}),ka,i(z,null,{default:o((()=>[n("div",xa,[i(qa,{onClick:s[6]||(s[6]=a=>za.value=!1)},{default:o((()=>[v("取消")])),_:1}),i(qa,{type:"primary","html-type":"submit",loading:Aa.value,class:"feedback-submit-btn"},{default:o((()=>[v(" 提交反馈 ")])),_:1},8,["loading"])])])),_:1})])),_:1},8,["model"])])),_:1},8,["open"])])}}},[["__scopeId","data-v-dbdaa5b9"]]);export{ja as default};
