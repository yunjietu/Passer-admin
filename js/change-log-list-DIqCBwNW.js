import{P as e,s as a,S as t}from"./index-ZxpkwSGJ.js";import{c as l}from"./change-log-api-C_gcpMGZ.js";import{_ as o}from"./index-wy53HiSK.js";import i from"./index-DPBcXeae.js";import{d as s}from"./default-time-ranges-uUNYRUiy.js";import r from"./change-log-modal-e1yl17t6.js";import n from"./change-log-form-CxigtviA.js";import{M as u,b as d}from"./ant-design-vue-DFQN5xdf.js";import{r as c,a as p,e as m,b2 as g,z as f,b as y,o as v,y as h,c as b,ag as j,bz as _,u as k,J as w,ai as x,ah as z,be as C,F as S}from"./@vue-wTDZSr7R.js";import"./@ant-design-rHMPkvPq.js";import"./vue-DiME50Ru.js";import"./@ctrl-B1U3vBhl.js";import"./lodash-DJa03WnC.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./dayjs-CSPdbndm.js";import"./vue-i18n-DNlNJnDH.js";import"./@intlify-BXJl0ReV.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-VShT-BxW.js";import"./sm-crypto-BtLvRUKc.js";import"./jsbn-qAKIvbVZ.js";import"./nprogress-DmlD4NmX.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-COtJ1lvC.js";import"./stylis-Bzr8AwGH.js";import"./vue-types-BvQfMnDx.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./sortablejs-CRp0PNdb.js";/* empty css                                                                                 */const I={class:"smart-table-operate-block"},D={class:"smart-table-setting-block"},E={key:2,class:"smart-table-operate"},T={class:"smart-query-table-page"},O={__name:"change-log-list",setup(O){const q=c([{title:"版本",dataIndex:"updateVersion",ellipsis:!0},{title:"更新类型",dataIndex:"type",ellipsis:!0},{title:"发布人",dataIndex:"publishAuthor",ellipsis:!0},{title:"发布日期",dataIndex:"publicDate",ellipsis:!0},{title:"更新内容",dataIndex:"content",ellipsis:!0},{title:"跳转链接",dataIndex:"link",ellipsis:!0},{title:"创建时间",dataIndex:"createTime",ellipsis:!0},{title:"更新时间",dataIndex:"updateTime",ellipsis:!0},{title:"操作",dataIndex:"action",fixed:"right",width:90}]),L={type:void 0,keyword:void 0,publicDate:[],publicDateBegin:void 0,publicDateEnd:void 0,createTime:void 0,link:void 0,pageNum:1,pageSize:10},N=p({...L}),U=c(!1),P=c([]),V=c(0);function Y(){let e=N.pageSize;Object.assign(N,L),N.pageSize=e,R()}function M(){N.pageNum=1,R()}async function R(){U.value=!0;try{let e=await l.queryPage(N);P.value=e.data.list,V.value=e.data.total}catch(e){a.captureError(e)}finally{U.value=!1}}function A(e,a){N.publicDateBegin=a[0],N.publicDateEnd=a[1]}m(R);const G=c();const B=c();function K(e){B.value.show(e)}function F(e){u.confirm({title:"提示",content:"确定要删除选吗?",okText:"删除",okType:"danger",onOk(){!async function(e){t.show();try{await l.delete(e.changeLogId),d.success("删除成功"),R()}catch(o){a.captureError(o)}finally{t.hide()}}(e)},cancelText:"取消",onCancel(){}})}const H=c([]);function J(e){H.value=e}function $(){u.confirm({title:"提示",content:"确定要批量删除这些数据吗?",okText:"删除",okType:"danger",onOk(){!async function(){try{t.show(),await l.batchDelete(H.value),d.success("删除成功"),R()}catch(e){a.captureError(e)}finally{t.hide()}}()},cancelText:"取消",onCancel(){}})}return(a,t)=>{const l=g("a-form-item"),u=g("a-input"),d=g("a-range-picker"),c=g("a-date-picker"),p=g("SearchOutlined"),m=g("a-button"),O=g("ReloadOutlined"),L=g("a-button-group"),U=g("a-row"),Q=g("a-form"),W=g("PlusOutlined"),X=g("DeleteOutlined"),Z=g("check-circle-outlined"),ee=g("a-tag"),ae=g("a-table"),te=g("a-pagination"),le=g("a-card"),oe=f("privilege");return v(),y(S,null,[h((v(),j(Q,{class:"smart-query-form"},{default:_((()=>[b(U,{class:"smart-query-form-row"},{default:_((()=>[b(l,{label:"更新类型",class:"smart-query-form-item"},{default:_((()=>[b(i,{width:"200px",value:N.type,"onUpdate:value":t[0]||(t[0]=e=>N.type=e),enumName:"CHANGE_LOG_TYPE_ENUM",placeholder:"更新类型"},null,8,["value"])])),_:1}),b(l,{label:"关键字",class:"smart-query-form-item"},{default:_((()=>[b(u,{style:{width:"200px"},value:N.keyword,"onUpdate:value":t[1]||(t[1]=e=>N.keyword=e),placeholder:"关键字"},null,8,["value"])])),_:1}),b(l,{label:"发布日期",class:"smart-query-form-item"},{default:_((()=>[b(d,{value:N.publicDate,"onUpdate:value":t[2]||(t[2]=e=>N.publicDate=e),presets:k(s),style:{width:"240px"},onChange:A},null,8,["value","presets"])])),_:1}),b(l,{label:"创建时间",class:"smart-query-form-item"},{default:_((()=>[b(c,{valueFormat:"YYYY-MM-DD",value:N.createTime,"onUpdate:value":t[3]||(t[3]=e=>N.createTime=e),style:{width:"150px"}},null,8,["value"])])),_:1}),b(l,{class:"smart-query-form-item"},{default:_((()=>[b(L,null,{default:_((()=>[b(m,{type:"primary",onClick:M},{icon:_((()=>[b(p)])),default:_((()=>[w(" 查询 ")])),_:1}),b(m,{onClick:Y,class:"smart-margin-left10"},{icon:_((()=>[b(O)])),default:_((()=>[w(" 重置 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})),[[oe,"support:changeLog:query"]]),b(le,{size:"small",bordered:!1,hoverable:!0},{default:_((()=>[b(U,{class:"smart-table-btn-block"},{default:_((()=>[x("div",I,[h((v(),j(m,{onClick:K,type:"primary"},{icon:_((()=>[b(W)])),default:_((()=>[w(" 新建 ")])),_:1})),[[oe,"support:changeLog:add"]]),h((v(),j(m,{onClick:$,danger:"",disabled:0===H.value.length},{icon:_((()=>[b(X)])),default:_((()=>[w(" 批量删除 ")])),_:1},8,["disabled"])),[[oe,"support:changeLog:batchDelete"]])]),x("div",D,[b(o,{modelValue:q.value,"onUpdate:modelValue":t[4]||(t[4]=e=>q.value=e),tableId:null,refresh:R},null,8,["modelValue"])])])),_:1}),b(ae,{size:"small",dataSource:P.value,columns:q.value,rowKey:"changeLogId",bordered:"",pagination:!1,"row-selection":{selectedRowKeys:H.value,onChange:J}},{bodyCell:_((({text:e,record:t,column:l})=>["updateVersion"===l.dataIndex?(v(),j(m,{key:0,onClick:e=>{return a=t,void G.value.show(a);var a},type:"link"},{default:_((()=>[w(C(e),1)])),_:2},1032,["onClick"])):z("",!0),"type"===l.dataIndex?(v(),j(ee,{key:1,color:"success"},{icon:_((()=>[b(Z)])),default:_((()=>[w(" "+C(a.$smartEnumPlugin.getDescByValue("CHANGE_LOG_TYPE_ENUM",e)),1)])),_:2},1024)):z("",!0),"action"===l.dataIndex?(v(),y("div",E,[h((v(),j(m,{onClick:e=>K(t),type:"link"},{default:_((()=>[w("编辑")])),_:2},1032,["onClick"])),[[oe,"support:changeLog:update"]]),h((v(),j(m,{onClick:e=>F(t),danger:"",type:"link"},{default:_((()=>[w("删除")])),_:2},1032,["onClick"])),[[oe,"support:changeLog:delete"]])])):z("",!0)])),_:1},8,["dataSource","columns","row-selection"]),x("div",T,[b(te,{showSizeChanger:"",showQuickJumper:"","show-less-items":"",pageSizeOptions:k(e),defaultPageSize:N.pageSize,current:N.pageNum,"onUpdate:current":t[5]||(t[5]=e=>N.pageNum=e),pageSize:N.pageSize,"onUpdate:pageSize":t[6]||(t[6]=e=>N.pageSize=e),total:V.value,onChange:R,onShowSizeChange:R,"show-total":e=>`共${e}条`},null,8,["pageSizeOptions","defaultPageSize","current","pageSize","total","show-total"])]),b(n,{ref_key:"formRef",ref:B,onReloadList:R},null,512),b(r,{ref_key:"modalRef",ref:G},null,512)])),_:1})],64)}}};export{O as default};
