import{_ as e,S as a,s as t}from"./index-ZxpkwSGJ.js";import o from"./code-generator-table-config-form-basic-CSL_rLw9.js";import{c as r}from"./code-generator-api-C7t1OM-w.js";import l from"./code-generator-table-config-form-field-D7Hl0b8i.js";import i from"./code-generator-table-config-form-insert-and-update-BdoZefxG.js";import s from"./code-generator-table-config-form-delete-BrfZrtrF.js";import n from"./code-generator-table-config-form-query-field-BVRZcGeS.js";import u from"./code-generator-table-config-form-table-field-DFX2B9Hc.js";import{b as m}from"./ant-design-vue-DFQN5xdf.js";import{r as d,a as f,b2 as p,ag as c,o as v,bz as j,c as b,ai as y,J as g,n as _,p as F}from"./@vue-wTDZSr7R.js";import"./@ant-design-rHMPkvPq.js";import"./vue-DiME50Ru.js";import"./@ctrl-B1U3vBhl.js";import"./lodash-DJa03WnC.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./dayjs-CSPdbndm.js";import"./vue-i18n-DNlNJnDH.js";import"./@intlify-BXJl0ReV.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-VShT-BxW.js";import"./sm-crypto-BtLvRUKc.js";import"./jsbn-qAKIvbVZ.js";import"./nprogress-DmlD4NmX.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-COtJ1lvC.js";import"./stylis-Bzr8AwGH.js";import"./vue-types-BvQfMnDx.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./str-util-DzH2vDMK.js";import"./code-generator-util-DOlNRQxn.js";import"./index-DPBcXeae.js";import"./sortablejs-CRp0PNdb.js";const k=e({__name:"code-generator-table-config-form",emits:["reloadList"],setup(e,{expose:k,emit:h}){const w=d(!1);function R(){w.value=!1}const C=d(),x=d(),D=d(),T=d(),N=d(),z=d(),A=d([]),q=d({});const E=f({tableName:"",tableComment:"",createTime:"",updateTime:""}),I=d("1"),K=h;async function O(){a.show();try{let e=await C.value.validateForm(),a=await D.value.validateForm(),t=await T.value.validateForm();if(!e||!a||!t)return;let o=x.value.getFieldsForm(),l=C.value.getBasicForm(),i=D.value.getFieldsForm(),s=T.value.getForm(),n=N.value.getFieldsForm(),u=z.value.getTaleFieldsForm();await r.updateConfig({tableName:E.tableName,basic:l,fields:o,insertAndUpdate:i,deleteInfo:s,queryFields:n,tableFields:u}),m.success("保存成功"),K("reloadList"),R()}catch(e){t.captureError(e)}finally{a.hide()}}return k({showModal:function(e){Object.assign(E,e),E.createTime=e.createTime?e.createTime:new Date,I.value="1",w.value=!0,_((()=>{!async function(){try{a.show();let e=await r.getTableColumns(E.tableName);A.value=e.data;let t=await r.getConfig(E.tableName);q.value=t.data,C.value.setData(q.value),x.value.setData(A.value,q.value),D.value.setData(A.value,q.value),T.value.setData(A.value,q.value),N.value.setData(A.value,q.value),z.value.setData(A.value,q.value)}catch(e){t.captureError(e)}finally{a.hide()}}()}))}}),F("tableInfo",E),F("tableColumns",A),F("tableConfig",q),(e,a)=>{const t=p("info-circle-outlined"),r=p("a-tab-pane"),m=p("unordered-list-outlined"),d=p("save-outlined"),f=p("delete-outlined"),_=p("file-search-outlined"),F=p("table-outlined"),k=p("a-tabs"),h=p("a-button"),A=p("a-space"),q=p("a-drawer");return v(),c(q,{title:"代码配置",style:{},open:w.value,width:1200,footerStyle:{textAlign:"right"},onClose:R,maskClosable:!1,destroyOnClose:!0},{footer:j((()=>[b(A,null,{default:j((()=>[b(h,{onClick:R},{default:j((()=>[g("取消")])),_:1}),b(h,{type:"primary",onClick:O},{default:j((()=>[g("保存")])),_:1})])),_:1})])),default:j((()=>[b(k,{activeKey:I.value,"onUpdate:activeKey":a[0]||(a[0]=e=>I.value=e)},{default:j((()=>[b(r,{key:"1",forceRender:!0},{tab:j((()=>[y("span",null,[b(t),g(" 1.基础命名 ")])])),default:j((()=>[b(o,{ref_key:"basicRef",ref:C},null,512)])),_:1}),b(r,{key:"2",forceRender:!0},{tab:j((()=>[y("span",null,[b(m),g(" 2.字段列表 ")])])),default:j((()=>[b(l,{ref_key:"fieldRef",ref:x},null,512)])),_:1}),b(r,{key:"3",forceRender:!0},{tab:j((()=>[y("span",null,[b(d),g(" 3.增加、修改 ")])])),default:j((()=>[b(i,{ref_key:"insertAndUpdateRef",ref:D},null,512)])),_:1}),b(r,{key:"4",forceRender:!0},{tab:j((()=>[y("span",null,[b(f),g(" 4.删除 ")])])),default:j((()=>[b(s,{ref_key:"deleteRef",ref:T},null,512)])),_:1}),b(r,{key:"5",forceRender:!0},{tab:j((()=>[y("span",null,[b(_),g(" 5、查询条件 ")])])),default:j((()=>[b(n,{ref_key:"queryRef",ref:N},null,512)])),_:1}),b(r,{key:"6",forceRender:!0},{tab:j((()=>[y("span",null,[b(F),g(" 6、列表 ")])])),default:j((()=>[b(u,{ref_key:"tableFieldRef",ref:z},null,512)])),_:1})])),_:1},8,["activeKey"])])),_:1},8,["open"])}}},[["__scopeId","data-v-f0d3fa9f"]]);export{k as default};
