import{_ as e}from"./lodash-DJa03WnC.js";import{r as t}from"./role-api-w0pDqSQW.js";import{_ as s,S as a,s as o}from"./index-ZxpkwSGJ.js";import r from"./index-CA1iBMPY.js";import{M as l,b as i}from"./ant-design-vue-DFQN5xdf.js";import{r as n,e as m,m as p,b2 as d,z as u,b as c,o as j,c as y,bz as f,K as v,u as x,F as b,b0 as _,ag as g,J as h,be as k,ai as C,y as w}from"./@vue-wTDZSr7R.js";import"./@ant-design-rHMPkvPq.js";import"./vue-DiME50Ru.js";import"./@ctrl-B1U3vBhl.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./dayjs-CSPdbndm.js";import"./vue-i18n-DNlNJnDH.js";import"./@intlify-BXJl0ReV.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-VShT-BxW.js";import"./sm-crypto-BtLvRUKc.js";import"./jsbn-qAKIvbVZ.js";import"./nprogress-DmlD4NmX.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-COtJ1lvC.js";import"./stylis-Bzr8AwGH.js";import"./vue-types-BvQfMnDx.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";const I={style:{display:"flex","flex-direction":"column"}},z=s({__name:"index",setup(s,{expose:z}){const E=n([]);async function K(){let s=await t.queryAll();E.value=s.data,!e.isEmpty(s.data)&&s.data[0].roleId&&(M.value=[s.data[0].roleId])}m(K);let M=n([]);const R=p((()=>!M.value&&e.isEmpty(M.value)?null:M.value[0])),T=n();function F(e){T.value.showModal(e)}return z({selectRoleId:R}),(e,s)=>{const n=d("a-button"),m=d("a-popover"),p=d("a-menu-item"),z=d("a-menu"),R=d("a-card"),q=u("privilege");return j(),c(b,null,[y(R,{title:"角色列表",class:"role-container",style:{padding:"0"}},{extra:f((()=>[w((j(),g(n,{type:"primary",size:"small",onClick:F},{default:f((()=>[h("添加")])),_:1})),[[q,"system:role:add"]])])),default:f((()=>[y(z,{mode:"vertical",selectedKeys:x(M),"onUpdate:selectedKeys":s[0]||(s[0]=e=>v(M)?M.value=e:M=e)},{default:f((()=>[(j(!0),c(b,null,_(E.value,(e=>(j(),g(p,{key:e.roleId},{default:f((()=>[y(m,{placement:"right"},{content:f((()=>[C("div",I,[w((j(),g(n,{type:"text",onClick:s=>{var r;(r=e.roleId)&&l.confirm({title:"提示",content:"确定要删除该角色么？",okText:"确定",okType:"danger",async onOk(){a.show();try{await t.deleteRole(r),i.info("删除成功"),K()}catch(e){o.captureError(e)}finally{a.hide()}},cancelText:"取消",onCancel(){}})}},{default:f((()=>[h("删除")])),_:2},1032,["onClick"])),[[q,"system:role:delete"]]),w((j(),g(n,{type:"text",onClick:t=>F(e)},{default:f((()=>[h("编辑")])),_:2},1032,["onClick"])),[[q,"system:role:update"]])])])),default:f((()=>[h(" "+k(e.roleName),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["selectedKeys"])])),_:1}),y(r,{ref_key:"roleFormModal",ref:T,onRefresh:K},null,512)],64)}}},[["__scopeId","data-v-8a76d639"]]);export{z as default};
