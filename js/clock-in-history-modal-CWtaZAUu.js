import{c as a}from"./chaoxing-system-clock-account-api-DCasCqQB.js";import{_ as e,s as t}from"./index-ZxpkwSGJ.js";import{d as o}from"./dayjs-CSPdbndm.js";import{b as s}from"./ant-design-vue-DFQN5xdf.js";import{r as i,a as r,b2 as l,ag as n,o as c,bz as p,ai as u,c as d,b as m,ah as g,J as j,be as y}from"./@vue-wTDZSr7R.js";import"./@ant-design-rHMPkvPq.js";import"./vue-DiME50Ru.js";import"./@ctrl-B1U3vBhl.js";import"./lodash-DJa03WnC.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./vue-i18n-DNlNJnDH.js";import"./@intlify-BXJl0ReV.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-VShT-BxW.js";import"./sm-crypto-BtLvRUKc.js";import"./jsbn-qAKIvbVZ.js";import"./nprogress-DmlD4NmX.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-COtJ1lvC.js";import"./stylis-Bzr8AwGH.js";import"./vue-types-BvQfMnDx.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";const v={style:{"font-size":"12px",color:"#666"}},f={class:"table-container"},h={key:1},x={class:"text-ellipsis",style:{"max-width":"200px",display:"inline-block"}},S=e({__name:"clock-in-history-modal",setup(e,{expose:S}){const I=i(!1),b=i(!1),z=i([]),k=i(""),w=i(""),_=r({accountId:null,pageNum:1,pageSize:10}),C=r({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:a=>`共 ${a} 条记录`}),N=[{title:"时间",dataIndex:"clockInTime",width:180,align:"center"},{title:"打卡类型",dataIndex:"clockType",width:100,align:"center"},{title:"结果",dataIndex:"result",width:100,align:"center"},{title:"信息",dataIndex:"message",width:400,align:"left"}];function T(){I.value=!1}function A(a){_.pageNum=a.current,_.pageSize=a.pageSize,E()}async function E(){try{b.value=!0;const e={accountId:_.accountId,pageNum:_.pageNum,pageSize:_.pageSize},t=await a.clockInHistoryPage(e);t&&t.data?t.data.list&&Array.isArray(t.data.list)?(z.value=t.data.list,C.total=t.data.total||0,C.current=t.data.pageNum||_.pageNum,C.pageSize=t.data.pageSize||_.pageSize):Array.isArray(t.data)?(z.value=t.data,C.total=t.data.length,C.current=_.pageNum,C.pageSize=_.pageSize):(z.value=[],C.total=0):(z.value=[],C.total=0)}catch(e){s.error("加载打卡历史失败"),t.captureError(e),z.value=[],C.total=0}finally{b.value=!1}}function D(a){return a?"SUCCESS"===a?"成功":"FAILED"===a?"失败":a:"未知"}return S({showModal:function(a){_.accountId=a.id,k.value=a.name||"未知用户",w.value=a.account||"未知账号",I.value=!0,E()}}),(a,e)=>{const t=l("a-tag"),s=l("a-tooltip"),i=l("a-table"),r=l("a-modal");return c(),n(r,{open:I.value,width:1e3,forceRender:"",footer:null,onCancel:T},{title:p((()=>[u("div",null,[j(" 打卡历史 "),u("span",v,y(k.value)+" - "+y(w.value),1)])])),default:p((()=>[u("div",f,[d(i,{dataSource:z.value,columns:N,pagination:C,loading:b.value,rowKey:"id",size:"small",bordered:"",scroll:{x:800},onChange:A},{bodyCell:p((({column:a,record:e,text:i})=>{return["result"===a.dataIndex?(c(),n(t,{key:0,color:(l=e.result,"SUCCESS"===l?"success":"FAILED"===l?"error":"default")},{default:p((()=>[j(y(D(e.result)),1)])),_:2},1032,["color"])):"clockInTime"===a.dataIndex?(c(),m("span",h,y((r=i,r?o(r).format("YYYY-MM-DD HH:mm:ss"):"")),1)):"message"===a.dataIndex?(c(),n(s,{key:2,title:i,placement:"topLeft"},{default:p((()=>[u("span",x,y(i),1)])),_:2},1032,["title"])):"clockType"===a.dataIndex?(c(),n(t,{key:3,color:"上班"===e.clockType?"blue":"orange"},{default:p((()=>[j(y(e.clockType),1)])),_:2},1032,["color"])):g("",!0)];var r,l})),_:1},8,["dataSource","pagination","loading"])])])),_:1},8,["open"])}}},[["__scopeId","data-v-8226532d"]]);export{S as default};
