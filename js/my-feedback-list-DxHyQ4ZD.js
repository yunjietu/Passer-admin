import{_ as e,c as a,j as t,s,P as i,t as r}from"./index-ZxpkwSGJ.js";import{d as o}from"./default-time-ranges-uUNYRUiy.js";import{_ as l}from"./index-CAEs7VG8.js";import{S as n,a5 as d,P as u}from"./@ant-design-rHMPkvPq.js";import{a as m,r as p,e as c,b2 as f,b as g,o as j,c as y,bz as b,u as h,J as v,ai as w,ag as x,ah as _,be as k,F as z}from"./@vue-wTDZSr7R.js";import"./ant-design-vue-DFQN5xdf.js";import"./@babel-rSvM8Ko2.js";import"./@ctrl-B1U3vBhl.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-COtJ1lvC.js";import"./stylis-Bzr8AwGH.js";import"./vue-types-BvQfMnDx.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./dayjs-CSPdbndm.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./vue-DiME50Ru.js";import"./lodash-DJa03WnC.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./vue-i18n-DNlNJnDH.js";import"./@intlify-BXJl0ReV.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-VShT-BxW.js";import"./sm-crypto-BtLvRUKc.js";import"./jsbn-qAKIvbVZ.js";import"./nprogress-DmlD4NmX.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";const S={class:"smart-table-operate-block"},I={class:"smart-query-table-page"},C=e({__name:"my-feedback-list",setup(e){const C=m([{title:"编号",dataIndex:"feedbackId",width:80,align:"center"},{title:"反馈内容",dataIndex:"feedbackContent",width:300,ellipsis:!0},{title:"反馈图片",dataIndex:"feedbackAttachment",width:120,align:"center"},{title:"联系方式",dataIndex:"contactInfo",width:140,ellipsis:!0},{title:"已读状态",dataIndex:"readFlag",width:100},{title:"已读时间",dataIndex:"readTime",width:150},{title:"反馈时间",dataIndex:"createTime",width:150}]),q={startDate:void 0,endDate:void 0,searchWord:void 0,pageNum:1,pageSize:a},D=m({...q}),M=p(!1),F=p([]),N=p(0);async function P(){try{M.value=!0;const e=await t.queryMyFeedback(D);F.value=e.data.list,N.value=e.data.total}catch(e){s.captureError(e)}finally{M.value=!1}}c((()=>{P()}));const U=p([]);function Y(e,a){D.startDate=a[0],D.endDate=a[1]}function O(){D.pageNum=1,P()}function W(){Object.assign(D,q),U.value=[],P()}const A=p();function E(){A.value.show()}return(e,a)=>{const t=f("a-input"),s=f("a-form-item"),m=f("a-range-picker"),p=f("a-button"),c=f("a-button-group"),q=f("a-row"),J=f("a-form"),L=f("a-tag"),T=f("a-table"),K=f("a-pagination"),Q=f("a-card");return j(),g(z,null,[y(J,{class:"smart-query-form"},{default:b((()=>[y(q,{class:"smart-query-form-row",style:{"align-items":"center"}},{default:b((()=>[y(s,{label:"关键字",class:"smart-query-form-item",style:{"margin-right":"20px"}},{default:b((()=>[y(t,{style:{width:"240px"},value:D.searchWord,"onUpdate:value":a[0]||(a[0]=e=>D.searchWord=e),valueModifiers:{trim:!0},placeholder:"反馈内容"},null,8,["value"])])),_:1}),y(s,{label:"创建日期",class:"smart-query-form-item",style:{"margin-right":"20px"}},{default:b((()=>[y(m,{value:U.value,"onUpdate:value":a[1]||(a[1]=e=>U.value=e),onChange:Y,presets:h(o),format:"YYYY-MM-DD",style:{width:"240px"}},null,8,["value","presets"])])),_:1}),y(s,{class:"smart-query-form-item"},{default:b((()=>[y(c,null,{default:b((()=>[y(p,{type:"primary",onClick:O},{icon:b((()=>[y(h(n))])),default:b((()=>[v(" 查询 ")])),_:1}),y(p,{onClick:W},{icon:b((()=>[y(h(d))])),default:b((()=>[v(" 刷新 ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),y(Q,{size:"small"},{default:b((()=>[y(q,{class:"smart-table-btn-block"},{default:b((()=>[w("div",S,[y(p,{type:"primary",onClick:E},{icon:b((()=>[y(h(u))])),default:b((()=>[v(" 提交反馈 ")])),_:1})])])),_:1}),y(T,{rowKey:"feedbackId",dataSource:F.value,columns:C,pagination:!1,loading:M.value,size:"small",bordered:"",scroll:{x:1e3},class:"feedback-table"},{bodyCell:b((({text:e,column:a})=>["feedbackAttachment"===a.dataIndex?(j(),x(l,{key:0,fileList:e,type:"picture"},null,8,["fileList"])):_("",!0),"readFlag"===a.dataIndex?(j(),x(L,{key:1,color:e?"green":"red"},{default:b((()=>[v(k(e?"已读":"未读"),1)])),_:2},1032,["color"])):_("",!0)])),_:1},8,["dataSource","columns","loading"]),w("div",I,[y(K,{showSizeChanger:"",showQuickJumper:"","show-less-items":"",pageSizeOptions:h(i),defaultPageSize:D.pageSize,current:D.pageNum,"onUpdate:current":a[2]||(a[2]=e=>D.pageNum=e),pageSize:D.pageSize,"onUpdate:pageSize":a[3]||(a[3]=e=>D.pageSize=e),total:N.value,onChange:P,onShowSizeChange:P,"show-total":e=>`共${e}条`},null,8,["pageSizeOptions","defaultPageSize","current","pageSize","total","show-total"])])])),_:1}),y(r,{ref_key:"feedbackModalRef",ref:A},null,512)],64)}}},[["__scopeId","data-v-a28c9c8b"]]);export{C as default};
