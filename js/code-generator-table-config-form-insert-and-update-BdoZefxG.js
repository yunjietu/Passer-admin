import{i as e,r as t,a,m as n,b2 as l,b as r,o,c as d,ag as s,ah as i,bz as u,y as p,J as m,u as c,be as g,E as f,ai as y,F as v,b0 as h,aY as j,aW as F}from"./@vue-wTDZSr7R.js";import{h as b,d as x}from"./code-generator-util-DOlNRQxn.js";import{_ as U,m as I,n as _}from"./index-ZxpkwSGJ.js";import k from"./index-DPBcXeae.js";import{b as w}from"./ant-design-vue-DFQN5xdf.js";import"./str-util-DzH2vDMK.js";import"./@ant-design-rHMPkvPq.js";import"./vue-DiME50Ru.js";import"./@ctrl-B1U3vBhl.js";import"./lodash-DJa03WnC.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./dayjs-CSPdbndm.js";import"./vue-i18n-DNlNJnDH.js";import"./@intlify-BXJl0ReV.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-VShT-BxW.js";import"./sm-crypto-BtLvRUKc.js";import"./jsbn-qAKIvbVZ.js";import"./nprogress-DmlD4NmX.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-COtJ1lvC.js";import"./stylis-Bzr8AwGH.js";import"./vue-types-BvQfMnDx.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";const A=e=>(j("data-v-c2027686"),e=e(),F(),e),L={class:"form-preview"},C=A((()=>y("div",{class:"gutter-box"},"字段",-1))),S=A((()=>y("div",{class:"gutter-box"},"字段",-1))),T=A((()=>y("div",{class:"gutter-box"},"字段",-1))),P={key:1},N=A((()=>y("br",null,null,-1))),q=U({__name:"code-generator-table-config-form-insert-and-update",setup(j,{expose:F}){e("tableInfo");const U=t(),A={isSupportInsertAndUpdate:!0,pageType:I.MODAL.value,width:void 0,countPerLine:1},q=a({...A}),E={isSupportInsertAndUpdate:[{required:!0,message:"请输入 是否允许增加、删除"}],pageType:[{required:!0,message:"请输入 页面方式"}],width:[{required:!0,message:"请输入 宽度"}],countPerLine:[{required:!0,message:"请输入 每行数量"}]},D=n((()=>parseInt(20/q.countPerLine))),M=t([{title:"列名",dataIndex:"columnName",width:120,ellipsis:!0},{title:"列描述",dataIndex:"columnComment",width:120,ellipsis:!0},{title:"列类型",dataIndex:"dataType",width:100,ellipsis:!0},{title:"非空",dataIndex:"nullableFlag",width:60},{title:"必填",dataIndex:"required",width:35},{title:"新增",dataIndex:"insertFlag",width:35},{title:"更新",dataIndex:"updateFlag",width:35},{title:"前端组件",dataIndex:"frontComponent",width:100}]),O=t([]);function R(e,t){if(!e)return null;let a=e.filter((e=>e.columnName===t));return a&&a.length>0?a[0]:null}return F({setData:function(e,t){t.insertAndUpdate&&(q.isSupportInsertAndUpdate=t.insertAndUpdate.isSupportInsertAndUpdate,q.pageType=t.insertAndUpdate.pageType,q.width=t.insertAndUpdate.width,q.countPerLine=t.insertAndUpdate.countPerLine);let a=t.insertAndUpdate&&t.insertAndUpdate.fieldList?t.insertAndUpdate.fieldList:null,n=[];for(let l of e){let e=R(a,l.columnName),t={columnName:l.columnName,columnComment:l.columnComment,dataType:l.dataType,nullableFlag:l.nullableFlag,primaryKeyFlag:l.primaryKeyFlag,autoIncreaseFlag:l.autoIncreaseFlag};t.requiredFlag=e?e.requiredFlag:!t.nullableFlag,t.insertFlag=e?e.insertFlag:!t.nullableFlag,t.updateFlag=!!e&&e.updateFlag,e&&e.frontComponent?t.frontComponent=e.frontComponent:t.frontComponent=x(l.columnComment)?_.ENUM_SELECT.value:b(l.dataType),n.push(t)}O.value=n},getFieldsForm:function(){let e=O.value.map((e=>({columnName:e.columnName,requiredFlag:e.requiredFlag,insertFlag:e.insertFlag,updateFlag:e.updateFlag,frontComponent:e.frontComponent})));return{isSupportInsertAndUpdate:q.isSupportInsertAndUpdate,pageType:q.pageType,width:q.width,countPerLine:q.countPerLine,fieldList:e}},validateForm:function(){return new Promise(((e,t)=>{U.value.validate().then((()=>{e(!0)})).catch((e=>{w.error(" 请检查【3.增加、修改】表单，有参数验证错误"),t(e)}))}))}}),(e,t)=>{const a=l("a-radio-button"),n=l("a-radio-group"),j=l("a-form-item"),F=l("a-input"),b=l("a-input-number"),x=l("a-form"),_=l("a-col"),w=l("a-row"),A=l("a-tag"),R=l("a-checkbox"),z=l("a-table");return o(),r(v,null,[d(w,{class:"smart-margin-top10"},{default:u((()=>[d(_,{flex:"350px"},{default:u((()=>[d(x,{ref_key:"formRef",ref:U,model:q,style:{width:"350px"},rules:E,"label-col":{span:5},"wrapper-col":{span:16}},{default:u((()=>[d(j,{label:"是否支持",name:"isSupportInsertAndUpdate"},{default:u((()=>[d(n,{value:q.isSupportInsertAndUpdate,"onUpdate:value":t[0]||(t[0]=e=>q.isSupportInsertAndUpdate=e),"button-style":"solid"},{default:u((()=>[d(a,{value:!0},{default:u((()=>[m("支持")])),_:1}),d(a,{value:!1},{default:u((()=>[m("不支持添加、修改")])),_:1})])),_:1},8,["value"])])),_:1}),q.isSupportInsertAndUpdate?(o(),s(j,{key:0,label:"页面方式",name:"pageType"},{default:u((()=>[d(n,{value:q.pageType,"onUpdate:value":t[1]||(t[1]=e=>q.pageType=e),"button-style":"solid"},{default:u((()=>[d(a,{value:c(I).MODAL.value},{default:u((()=>[m(g(c(I).MODAL.desc),1)])),_:1},8,["value"]),d(a,{value:c(I).DRAWER.value},{default:u((()=>[m(g(c(I).DRAWER.desc),1)])),_:1},8,["value"])])),_:1},8,["value"])])),_:1})):i("",!0),q.isSupportInsertAndUpdate?p((o(),s(j,{key:1,label:"页面宽度",name:"width"},{default:u((()=>[d(F,{value:q.width,"onUpdate:value":t[2]||(t[2]=e=>q.width=e),placeholder:"Modal或者Drawer的width属性 "},null,8,["value"])])),_:1},512)),[[f,q.pageType!==c(I).PAGE.value]]):i("",!0),q.isSupportInsertAndUpdate?(o(),s(j,{key:2,label:"每行数量",name:"countPerLine"},{default:u((()=>[d(b,{style:{width:"100%"},max:24,value:q.countPerLine,"onUpdate:value":t[3]||(t[3]=e=>q.countPerLine=e),placeholder:"请输入 每行数量 "},null,8,["value"])])),_:1})):i("",!0)])),_:1},8,["model"])])),_:1}),q.isSupportInsertAndUpdate?(o(),s(_,{key:0,flex:"auto",style:{height:"auto",width:"500px"}},{default:u((()=>[y("div",L,[d(w,{gutter:20,justify:"space-around"},{default:u((()=>[(o(!0),r(v,null,h(q.countPerLine,(e=>(o(),s(_,{class:"form-item",span:D.value,key:e},{default:u((()=>[C])),_:2},1032,["span"])))),128))])),_:1}),d(w,{gutter:20,class:"smart-margin-top10",justify:"space-around"},{default:u((()=>[(o(!0),r(v,null,h(q.countPerLine,(e=>(o(),s(_,{class:"form-item",span:D.value,key:e},{default:u((()=>[S])),_:2},1032,["span"])))),128))])),_:1}),d(w,{gutter:20,class:"smart-margin-top10",justify:"space-around"},{default:u((()=>[(o(!0),r(v,null,h(q.countPerLine,(e=>(o(),s(_,{class:"form-item",span:D.value,key:e},{default:u((()=>[T])),_:2},1032,["span"])))),128))])),_:1})])])),_:1})):i("",!0)])),_:1}),q.isSupportInsertAndUpdate?(o(),s(z,{key:0,size:"small",scroll:{x:1e3},bordered:"",class:"smart-margin-top10",dataSource:O.value,columns:M.value,rowKey:"columnName",pagination:!1},{bodyCell:u((({text:e,record:t,index:a,column:n})=>["no"===n.dataIndex?(o(),r(v,{key:0},[m(g(a+1),1)],64)):i("",!0),"columnName"===n.dataIndex?(o(),r("span",P,[t.primaryKeyFlag?(o(),s(A,{key:0,color:"#f50",style:{"line-height":"12px"}},{default:u((()=>[m("主键")])),_:1})):i("",!0),t.autoIncreaseFlag?(o(),s(A,{key:1,color:"#f50",style:{"line-height":"12px"}},{default:u((()=>[m("自增")])),_:1})):i("",!0),N,m(" "+g(e),1)])):i("",!0),"nullableFlag"===n.dataIndex?(o(),r(v,{key:2},[e?i("",!0):(o(),s(A,{key:0,color:"error"},{default:u((()=>[m("非空")])),_:1}))],64)):i("",!0),"required"===n.dataIndex?(o(),s(R,{key:3,checked:t.requiredFlag,"onUpdate:checked":e=>t.requiredFlag=e},null,8,["checked","onUpdate:checked"])):i("",!0),"insertFlag"===n.dataIndex?(o(),s(R,{key:4,checked:t.insertFlag,"onUpdate:checked":e=>t.insertFlag=e},null,8,["checked","onUpdate:checked"])):i("",!0),"updateFlag"===n.dataIndex?(o(),s(R,{key:5,checked:t.updateFlag,"onUpdate:checked":e=>t.updateFlag=e},null,8,["checked","onUpdate:checked"])):i("",!0),"frontComponent"===n.dataIndex?(o(),s(k,{key:6,width:"100%","enum-name":"CODE_FRONT_COMPONENT_ENUM",value:t.frontComponent,"onUpdate:value":e=>t.frontComponent=e},null,8,["value","onUpdate:value"])):i("",!0)])),_:1},8,["dataSource","columns"])):i("",!0)],64)}}},[["__scopeId","data-v-c2027686"]]);export{q as default};
