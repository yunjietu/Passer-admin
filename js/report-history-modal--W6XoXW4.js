import{a as t}from"./account-api-Ia2S-UTU.js";import{_ as e,s as a}from"./index-ZxpkwSGJ.js";import{d as o}from"./dayjs-CSPdbndm.js";import{b as s}from"./ant-design-vue-DFQN5xdf.js";import{r,a as i,b2 as n,ag as l,o as p,bz as u,ai as d,c,b as m,ah as j,J as g,be as f}from"./@vue-wTDZSr7R.js";import"./@ant-design-rHMPkvPq.js";import"./vue-DiME50Ru.js";import"./@ctrl-B1U3vBhl.js";import"./lodash-DJa03WnC.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./vue-i18n-DNlNJnDH.js";import"./@intlify-BXJl0ReV.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-VShT-BxW.js";import"./sm-crypto-BtLvRUKc.js";import"./jsbn-qAKIvbVZ.js";import"./nprogress-DmlD4NmX.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";import"./@babel-rSvM8Ko2.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-COtJ1lvC.js";import"./stylis-Bzr8AwGH.js";import"./vue-types-BvQfMnDx.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";const y={style:{"font-size":"12px",color:"#666"}},v={class:"table-container"},h={key:2},b={class:"text-ellipsis",style:{"max-width":"200px",display:"inline-block"}},x=e({__name:"report-history-modal",setup(e,{expose:x}){const w=r(!1),z=r(!1),I=r([]),S=r(""),_=r(""),k=i({accountId:null,pageNum:1,pageSize:10}),D=i({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:t=>`共 ${t} 条记录`}),T=[{title:"报告类型",dataIndex:"reportTypeDesc",width:80,align:"center"},{title:"提交时间",dataIndex:"submitTime",width:150,align:"center"},{title:"提交状态",dataIndex:"submitStatusDesc",width:80,align:"center"},{title:"状态信息",dataIndex:"statusMessage",width:200,align:"left"},{title:"报告时间段",dataIndex:"reportPeriod",width:150,align:"center"}];function C(){w.value=!1}function M(t){k.pageNum=t.current,k.pageSize=t.pageSize,Y()}async function Y(){try{z.value=!0;const e=await t.queryReportHistory(k);e.data&&(I.value=e.data.list||[],D.total=e.data.total||0,D.current=k.pageNum,D.pageSize=k.pageSize)}catch(e){s.error("加载报告历史失败"),a.captureError(e)}finally{z.value=!1}}function H(t){switch(t){case"day":return"blue";case"week":return"green";case"month":return"orange";default:return"default"}}return x({showModal:function(t,e,a){k.accountId=t,S.value=e,_.value=a,w.value=!0,Y()}}),(t,e)=>{const a=n("a-tag"),s=n("a-tooltip"),r=n("a-table"),i=n("a-modal");return p(),l(i,{open:w.value,width:1e3,forceRender:"",footer:null,onCancel:C},{title:u((()=>[d("div",null,[g(" 报告历史 "),d("span",y,f(S.value)+" - "+f(_.value),1)])])),default:u((()=>[d("div",v,[c(r,{dataSource:I.value,columns:T,pagination:D,loading:z.value,rowKey:"id",size:"small",bordered:"",scroll:{x:800},onChange:M},{bodyCell:u((({column:t,record:e,text:r})=>{return["reportTypeDesc"===t.dataIndex?(p(),l(a,{key:0,color:H(e.reportType)},{default:u((()=>[g(f(r),1)])),_:2},1032,["color"])):"submitStatusDesc"===t.dataIndex?(p(),l(a,{key:1,color:e.submitStatus?"success":"error"},{default:u((()=>[g(f(r),1)])),_:2},1032,["color"])):"submitTime"===t.dataIndex?(p(),m("span",h,f((i=r,i?o(i).format("YYYY-MM-DD HH:mm"):"")),1)):"statusMessage"===t.dataIndex?(p(),l(s,{key:3,title:r,placement:"topLeft"},{default:u((()=>[d("span",b,f(r),1)])),_:2},1032,["title"])):j("",!0)];var i})),_:1},8,["dataSource","pagination","loading"])])])),_:1},8,["open"])}}},[["__scopeId","data-v-a926868f"]]);export{x as default};
