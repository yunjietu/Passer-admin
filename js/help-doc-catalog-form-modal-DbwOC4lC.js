import{m as e}from"./ant-design-vue-DFQN5xdf.js";import{S as a,v as t,s as o}from"./index-ZxpkwSGJ.js";import r from"./help-doc-catalog-tree-select-8-bfQGZB.js";import{r as s,a as l,b2 as i,ag as n,o as p,bz as m,c as u,u as d,ah as c}from"./@vue-wTDZSr7R.js";import"./@babel-rSvM8Ko2.js";import"./@ant-design-rHMPkvPq.js";import"./vue-DiME50Ru.js";import"./@ctrl-B1U3vBhl.js";import"./resize-observer-polyfill-OVnto9HH.js";import"./@emotion-COtJ1lvC.js";import"./stylis-Bzr8AwGH.js";import"./vue-types-BvQfMnDx.js";import"./dom-align-CCb293uS.js";import"./lodash-es-DiERF9Dp.js";import"./dayjs-CSPdbndm.js";import"./async-validator-BTKOuuO-.js";import"./throttle-debounce-w9OM8Bxz.js";import"./lodash-DJa03WnC.js";import"./vue3-json-viewer-BcgvkQJY.js";import"./vue-i18n-DNlNJnDH.js";import"./@intlify-BXJl0ReV.js";import"./pinia-BY_IhmGU.js";import"./axios-BlN9Xwzv.js";import"./crypto-js-VShT-BxW.js";import"./sm-crypto-BtLvRUKc.js";import"./jsbn-qAKIvbVZ.js";import"./nprogress-DmlD4NmX.js";import"./vue-router-BJIyZwNj.js";import"./mitt-CNZ6avp8.js";const j={__name:"help-doc-catalog-form-modal",emits:["refresh"],setup(j,{expose:f,emit:v}){f({showModal:function(e){g.value=!0,function(e){Object.assign(_,I),e&&Object.assign(_,e);g.value=!0}(e)}});const h=v,g=s(!1);function y(){g.value=!1,Object.assign(_,I)}const b=s(),w=s(),I={helpDocCatalogId:void 0,name:void 0,parentId:void 0,sort:0};s();let _=l({...I});const C={parentId:[{required:!0,message:"上级目录不能为空"}],name:[{required:!0,message:"目录名称不能为空"},{max:50,message:"目录名称不能大于20个字符",trigger:"blur"}]};async function x(){try{await b.value.validate(),_.helpDocCatalogId?async function(){a.show();try{if(_.parentId===_.helpDocCatalogId)return void e.warning("上级菜单不能为自己");await t.update(_),h("refresh"),y()}catch(r){o.captureError(r)}finally{a.hide()}}():async function(){a.show();try{await t.add(_),h("refresh"),y()}catch(e){o.captureError(e)}finally{a.hide()}}()}catch(r){e.error("参数验证错误，请仔细填写表单数据!")}}return(e,a)=>{const t=i("a-form-item"),o=i("a-input"),s=i("a-input-number"),l=i("a-form"),j=i("a-modal");return p(),n(j,{open:g.value,"onUpdate:open":a[3]||(a[3]=e=>g.value=e),title:d(_).helpDocCatalogId?"编辑目录":"添加目录",onOk:x,destroyOnClose:""},{default:m((()=>[u(l,{ref_key:"formRef",ref:b,model:d(_),rules:C,layout:"vertical"},{default:m((()=>[0!==d(_).parentId?(p(),n(t,{key:0,label:"上级目录",name:"parentId"},{default:m((()=>[u(r,{ref_key:"helpDocCatalogTreeSelect",ref:w,value:d(_).parentId,"onUpdate:value":a[0]||(a[0]=e=>d(_).parentId=e),defaultValueFlag:!1,width:"100%"},null,8,["value"])])),_:1})):c("",!0),u(t,{label:"目录名称",name:"name"},{default:m((()=>[u(o,{value:d(_).name,"onUpdate:value":a[1]||(a[1]=e=>d(_).name=e),valueModifiers:{trim:!0},placeholder:"请输入目录名称"},null,8,["value"])])),_:1}),u(t,{label:"目录排序 （值越小越靠前！）",name:"sort"},{default:m((()=>[u(s,{style:{width:"100%"},value:d(_).sort,"onUpdate:value":a[2]||(a[2]=e=>d(_).sort=e),min:0,placeholder:"请输入目录名称"},null,8,["value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["open","title"])}}};export{j as default};
